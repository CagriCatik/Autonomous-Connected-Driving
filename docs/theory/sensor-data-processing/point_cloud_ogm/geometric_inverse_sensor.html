<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Occupancy Grid Mapping from 3D Point Clouds: Geometric Inverse Sensor Models | Automated and Connected Driving</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Occupancy Grid Mapping from 3D Point Clouds: Geometric Inverse Sensor Models | Automated and Connected Driving"><meta data-rh="true" name="description" content="Occupancy grid mapping is a cornerstone technique in robotic perception and environmental modeling, enabling autonomous systems to interpret and navigate through their surroundings effectively. By transforming raw sensor data into a probabilistic grid-based representation of the environment, robots can make informed decisions, avoid obstacles, and perform complex tasks with increased autonomy and reliability."><meta data-rh="true" property="og:description" content="Occupancy grid mapping is a cornerstone technique in robotic perception and environmental modeling, enabling autonomous systems to interpret and navigate through their surroundings effectively. By transforming raw sensor data into a probabilistic grid-based representation of the environment, robots can make informed decisions, avoid obstacles, and perform complex tasks with increased autonomy and reliability."><link data-rh="true" rel="icon" href="/Autonomous-Connected-Driving/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor" hreflang="en"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Autonomous-Connected-Driving/blog/rss.xml" title="Automated and Connected Driving RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Autonomous-Connected-Driving/blog/atom.xml" title="Automated and Connected Driving Atom Feed"><link rel="stylesheet" href="/Autonomous-Connected-Driving/assets/css/styles.ce2d5abf.css">
<script src="/Autonomous-Connected-Driving/assets/js/runtime~main.9c449b8d.js" defer="defer"></script>
<script src="/Autonomous-Connected-Driving/assets/js/main.43a98e14.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Autonomous-Connected-Driving/"><div class="navbar__logo"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/introduction-tools/getting_started">Introduction &amp; Tools</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Sensor Data Processing</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/object-fusion-tracking/getting_started">Object Fusion and Tracking</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/vehicle-guidance/getting_started">Vehicle Guidance</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Connected Driving</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/task/getting_started">Tasks</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/introduction-1">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/image-segmentation">Image Segmentation</a><button aria-label="Expand sidebar category &#x27;Image Segmentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/semantic-point-cloud-segmentation">Semantic Point Cloud Segmentation</a><button aria-label="Expand sidebar category &#x27;Semantic Point Cloud Segmentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/object-detection">Object Detection</a><button aria-label="Expand sidebar category &#x27;Object Detection&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Autonomous-Connected-Driving/docs/category/point-cloud-ogm">Point Cloud OGM</a><button aria-label="Collapse sidebar category &#x27;Point Cloud OGM&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/introduction">Point Cloud Occupancy Grid Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/geometric_inverse_sensor">Occupancy Grid Mapping from 3D Point Clouds: Geometric Inverse Sensor Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/deep_inverse_sensor">Point Cloud Occupancy Grid Mapping Using Deep Inverse Sensor Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/training_evaluation">Training and Evaluating Neural Networks for Occupancy Grid Maps</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/camera-based-semantic-grid-mapping">Camera Based Semantic Grid Mapping</a><button aria-label="Expand sidebar category &#x27;Camera Based Semantic Grid Mapping&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/localization">Localization</a><button aria-label="Expand sidebar category &#x27;Localization&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Autonomous-Connected-Driving/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Autonomous-Connected-Driving/docs/category/point-cloud-ogm"><span itemprop="name">Point Cloud OGM</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Occupancy Grid Mapping from 3D Point Clouds: Geometric Inverse Sensor Models</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Occupancy Grid Mapping from 3D Point Clouds: Geometric Inverse Sensor Models</h1></header>
<p>Occupancy grid mapping is a cornerstone technique in robotic perception and environmental modeling, enabling autonomous systems to interpret and navigate through their surroundings effectively. By transforming raw sensor data into a probabilistic grid-based representation of the environment, robots can make informed decisions, avoid obstacles, and perform complex tasks with increased autonomy and reliability.</p>
<p>This documentation delves into <strong>occupancy grid mapping</strong> using <strong>geometric inverse sensor models</strong>, providing a comprehensive understanding of the underlying concepts, mathematical foundations, algorithms, and the inherent challenges associated with processing 3D LiDAR data to estimate occupancy probabilities within a grid-based environment.</p>
<p>Whether you are a beginner seeking foundational knowledge or an advanced practitioner aiming to refine your implementation, this guide offers detailed insights to enhance your expertise in occupancy grid mapping.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fundamentals-of-occupancy-grid-mapping">Fundamentals of Occupancy Grid Mapping<a href="#fundamentals-of-occupancy-grid-mapping" class="hash-link" aria-label="Direct link to Fundamentals of Occupancy Grid Mapping" title="Direct link to Fundamentals of Occupancy Grid Mapping">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-occupancy-grid-mapping">What is Occupancy Grid Mapping?<a href="#what-is-occupancy-grid-mapping" class="hash-link" aria-label="Direct link to What is Occupancy Grid Mapping?" title="Direct link to What is Occupancy Grid Mapping?">​</a></h3>
<p>Occupancy grid mapping is a probabilistic framework used to represent an environment as a grid of discrete cells, where each cell holds the probability of being occupied by an obstacle. This method simplifies complex real-world environments into manageable data structures, facilitating efficient navigation, obstacle avoidance, and decision-making for autonomous systems.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Discrete Representation:</strong> The environment is divided into a grid of cells, each corresponding to a specific area in the physical space.</li>
<li><strong>Probabilistic Nature:</strong> Each cell contains a probability value indicating the likelihood of occupancy, accommodating uncertainties inherent in sensor measurements.</li>
<li><strong>Scalability:</strong> Suitable for both small-scale environments (e.g., indoor spaces) and large-scale areas (e.g., outdoor terrains).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="applications-in-robotics">Applications in Robotics<a href="#applications-in-robotics" class="hash-link" aria-label="Direct link to Applications in Robotics" title="Direct link to Applications in Robotics">​</a></h3>
<p>Occupancy grid mapping is extensively utilized across various domains within robotics, including:</p>
<ul>
<li><strong>Autonomous Navigation:</strong> Enables robots to plan and execute paths by identifying free and occupied spaces.</li>
<li><strong>Obstacle Avoidance:</strong> Facilitates real-time detection and avoidance of dynamic and static obstacles.</li>
<li><strong>Environmental Mapping:</strong> Assists in creating detailed maps for exploration, surveillance, and monitoring tasks.</li>
<li><strong>Simultaneous Localization and Mapping (SLAM):</strong> Integrates mapping with localization, allowing robots to understand their position relative to the environment while building the map.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="geometric-inverse-sensor-models">Geometric Inverse Sensor Models<a href="#geometric-inverse-sensor-models" class="hash-link" aria-label="Direct link to Geometric Inverse Sensor Models" title="Direct link to Geometric Inverse Sensor Models">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition-and-overview">Definition and Overview<a href="#definition-and-overview" class="hash-link" aria-label="Direct link to Definition and Overview" title="Direct link to Definition and Overview">​</a></h3>
<p>A <strong>geometric inverse sensor model</strong> is a method that interprets sensor measurements by leveraging geometric information to estimate the occupancy probabilities of grid cells. Unlike probabilistic models that incorporate various sources of uncertainty, geometric inverse sensor models primarily rely on the spatial relationships and distances derived from sensor data to determine occupancy.</p>
<p><strong>Core Concepts:</strong></p>
<ul>
<li><strong>Sensor Position (( S )):</strong> The origin point from which sensor measurements are taken.</li>
<li><strong>Reflection Point (( R )):</strong> A point in space where the sensor detects a reflection, indicating a potential obstacle.</li>
<li><strong>Grid Cell (( C )):</strong> A discrete unit within the occupancy grid map.</li>
</ul>
<p><strong>Operational Principles:</strong></p>
<ol>
<li><strong>Occupied Cells:</strong> Cells near the reflection points ( R ) are assigned high occupancy probabilities.</li>
<li><strong>Free Cells:</strong> Cells along the line from the sensor position ( S ) to ( R ) but not at ( R ) are assigned low occupancy probabilities, indicating free space.</li>
<li><strong>Unknown Cells:</strong> Cells beyond ( R ) retain their prior probability (often 50%), representing uncertainty.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mathematical-foundations">Mathematical Foundations<a href="#mathematical-foundations" class="hash-link" aria-label="Direct link to Mathematical Foundations" title="Direct link to Mathematical Foundations">​</a></h3>
<p>The geometric inverse sensor model is grounded in geometry and probability theory, enabling the conversion of sensor measurements into probabilistic occupancy estimates.</p>
<p><strong>Binary Bayes Filter:</strong></p>
<p>To update the occupancy probabilities based on sensor measurements, the Binary Bayes Filter is employed. The filter updates the posterior probability of occupancy <span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ P(O_k|z_{1:k})…" style="color:#cc0000">\( P(O_k|z_{1:k}) \)</span> for each cell <span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ k \)" style="color:#cc0000">\( k \)</span> using the following equation:</p>
<span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\]&#x27; in math mode at position 80: …_k|z_{1:k-1})}
\̲]̲" style="color:#cc0000">\[
P(O_k|z_{1:k}) = \frac{P(z_k|O_k) \cdot P(O_k|z_{1:k-1})}{P(z_k|z_{1:k-1})}
\]</span>
<p>Where:</p>
<ul>
<li><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ P(O_k|z_{1:k})…" style="color:#cc0000">\( P(O_k|z_{1:k}) \)</span>: Posterior probability of occupancy for cell ( k ).</li>
<li><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ P(z_k|O_k) \)" style="color:#cc0000">\( P(z_k|O_k) \)</span>: Likelihood of sensor measurement ( z_k ) given occupancy.</li>
<li><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ P(O_k|z_{1:k-1…" style="color:#cc0000">\( P(O_k|z_{1:k-1}) \)</span>: Prior probability of occupancy before the current measurement.</li>
<li><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 1: \̲(̲ P(z_k|z_{1:k-1…" style="color:#cc0000">\( P(z_k|z_{1:k-1}) \)</span>: Normalizing constant ensuring probabilities sum to one.</li>
</ul>
<p>This Bayesian update allows for the integration of multiple sensor measurements over time, refining the occupancy estimates for each grid cell.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-for-geometric-occupancy-grid-mapping">Workflow for Geometric Occupancy Grid Mapping<a href="#workflow-for-geometric-occupancy-grid-mapping" class="hash-link" aria-label="Direct link to Workflow for Geometric Occupancy Grid Mapping" title="Direct link to Workflow for Geometric Occupancy Grid Mapping">​</a></h2>
<p>Implementing occupancy grid mapping using geometric inverse sensor models involves a systematic workflow comprising several steps. This section outlines each phase in detail, providing both conceptual understanding and practical guidelines.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-preprocessing-the-point-cloud-removing-ground-points">1. Preprocessing the Point Cloud: Removing Ground Points<a href="#1-preprocessing-the-point-cloud-removing-ground-points" class="hash-link" aria-label="Direct link to 1. Preprocessing the Point Cloud: Removing Ground Points" title="Direct link to 1. Preprocessing the Point Cloud: Removing Ground Points">​</a></h3>
<p><strong>Objective:</strong> Isolate obstacles by eliminating ground points from the 3D point cloud data obtained from sensors like LiDAR.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Plane Fitting:</strong></p>
<ul>
<li>Apply algorithms (e.g., RANSAC) to fit a plane representing the ground.</li>
<li>Identify points that lie on or near the ground plane.</li>
</ul>
</li>
<li>
<p><strong>Filtering:</strong></p>
<ul>
<li>Remove points below a certain height threshold relative to the ground plane.</li>
<li>This step ensures that only potential obstacles (e.g., vehicles, pedestrians) remain.</li>
</ul>
</li>
</ol>
<p><strong>Simple Approach:</strong></p>
<ul>
<li><strong>Height Thresholding:</strong> Filter out all points below a predefined height above the ground level.</li>
</ul>
<p><strong>Challenges:</strong></p>
<ul>
<li><strong>Non-Flat Terrains:</strong>
<ul>
<li>Sloped roads or uneven surfaces can cause incorrect ground point removal, leading to false positives or negatives.</li>
</ul>
</li>
<li><strong>Dynamic Environments:</strong>
<ul>
<li>Moving objects (e.g., braking cars) introduce noise, making it difficult to distinguish between static ground and dynamic obstacles.</li>
</ul>
</li>
</ul>
<p><strong>Advanced Considerations:</strong></p>
<ul>
<li><strong>Slope Evaluation:</strong>
<ul>
<li>Assess the slope of detected ground points to adapt the height threshold dynamically.</li>
</ul>
</li>
<li><strong>Clustering:</strong>
<ul>
<li>Group nearby points to identify consistent ground regions, enhancing the accuracy of ground point removal.</li>
</ul>
</li>
</ul>
<p><strong>Example Visualization:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Input: Full point cloud (including ground and obstacles)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output: Point cloud excluding ground points (isolated obstacles)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-grid-map-initialization">2. Grid Map Initialization<a href="#2-grid-map-initialization" class="hash-link" aria-label="Direct link to 2. Grid Map Initialization" title="Direct link to 2. Grid Map Initialization">​</a></h3>
<p><strong>Objective:</strong> Establish the discrete grid structure that will represent the environment.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Define Grid Parameters:</strong></p>
<ul>
<li><strong>Grid Size:</strong> Total number of cells along each dimension (e.g., 100x100).</li>
<li><strong>Grid Resolution:</strong> Physical size each cell represents (e.g., 0.5 meters).</li>
</ul>
</li>
<li>
<p><strong>Initialize Occupancy Grid:</strong></p>
<ul>
<li>Create a 2D or 3D array (depending on the application) with all cells initialized to a neutral probability (e.g., 50%).</li>
</ul>
</li>
</ol>
<p><strong>Considerations:</strong></p>
<ul>
<li><strong>Dynamic vs. Static Grids:</strong>
<ul>
<li>For dynamic environments, consider mechanisms to update or reinitialize the grid periodically.</li>
</ul>
</li>
<li><strong>Memory Efficiency:</strong>
<ul>
<li>Optimize data structures to handle large grids without excessive memory consumption.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-applying-the-inverse-sensor-model">3. Applying the Inverse Sensor Model<a href="#3-applying-the-inverse-sensor-model" class="hash-link" aria-label="Direct link to 3. Applying the Inverse Sensor Model" title="Direct link to 3. Applying the Inverse Sensor Model">​</a></h3>
<p><strong>Objective:</strong> Assign occupancy probabilities to grid cells based on sensor measurements.</p>
<p><strong>Process:</strong></p>
<ol>
<li>
<p><strong>Iterate Over Reflection Points:</strong></p>
<ul>
<li>For each reflection point ( R ) in the point cloud, perform the following:</li>
</ul>
</li>
<li>
<p><strong>Determine Affected Cells:</strong></p>
<ul>
<li><strong>Occupied Cell:</strong> The cell containing ( R ) is assigned a high occupancy probability (e.g., 90%).</li>
<li><strong>Free Cells:</strong> All cells along the line from the sensor position ( S ) to ( R ) are assigned low occupancy probabilities (e.g., 10%).</li>
<li><strong>Unknown Cells:</strong> Cells beyond ( R ) retain their prior probability (e.g., 50%).</li>
</ul>
</li>
<li>
<p><strong>Update Grid:</strong></p>
<ul>
<li>Modify the occupancy probabilities of the affected cells based on the inverse sensor model.</li>
</ul>
</li>
</ol>
<p><strong>Visualization:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Sensor Position (S) ----&gt; Free Cells (Low Probability) ----&gt; Occupied Cell (High Probability)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-binary-bayes-filter-for-probability-updates">4. Binary Bayes Filter for Probability Updates<a href="#4-binary-bayes-filter-for-probability-updates" class="hash-link" aria-label="Direct link to 4. Binary Bayes Filter for Probability Updates" title="Direct link to 4. Binary Bayes Filter for Probability Updates">​</a></h3>
<p><strong>Objective:</strong> Update the occupancy probabilities of grid cells by combining information from multiple sensor measurements over time.</p>
<p><strong>Bayesian Update Equation:</strong></p>
<span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\]&#x27; in math mode at position 88: … | z_{1:k-1})}
\̲]̲" style="color:#cc0000">\[
P(O_k | z_{1:k}) = \frac{P(z_k | O_k) \cdot P(O_k | z_{1:k-1})}{P(z_k | z_{1:k-1})}
\]</span>
<p><strong>Implementation Steps:</strong></p>
<ol>
<li>
<p><strong>Prior Probability <span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 2: (\̲(̲ P_{\text{prior…" style="color:#cc0000">(\( P_{\text{prior}} \))</span>:</strong></p>
<ul>
<li>Initialize to the cell&#x27;s current occupancy probability.</li>
</ul>
</li>
<li>
<p><strong>Likelihood <span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 2: (\̲(̲ P(z_k | O_k) \…" style="color:#cc0000">(\( P(z_k | O_k) \))</span>:</strong></p>
<ul>
<li>Based on the inverse sensor model (e.g., high for occupied, low for free).</li>
</ul>
</li>
<li>
<p><strong>Compute Posterior Probability <span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;\(&#x27; in math mode at position 2: (\̲(̲ P_{\text{poste…" style="color:#cc0000">(\( P_{\text{posterior}} \))</span>:</strong></p>
<ul>
<li>Apply the Bayesian update to combine prior and likelihood.</li>
</ul>
</li>
<li>
<p><strong>Iterate Over All Measurements:</strong></p>
<ul>
<li>Repeat the update process for each reflection point, refining the occupancy probabilities.</li>
</ul>
</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Incorporates Multiple Measurements:</strong>
<ul>
<li>Enhances reliability by aggregating information over time.</li>
</ul>
</li>
<li><strong>Handles Uncertainty:</strong>
<ul>
<li>Accounts for sensor noise and measurement inaccuracies.</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="challenges-of-the-geometric-approach">Challenges of the Geometric Approach<a href="#challenges-of-the-geometric-approach" class="hash-link" aria-label="Direct link to Challenges of the Geometric Approach" title="Direct link to Challenges of the Geometric Approach">​</a></h2>
<p>While geometric inverse sensor models provide a robust framework for occupancy grid mapping, they come with inherent limitations. Understanding these challenges is crucial for developing more effective and resilient mapping systems.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sparse-grid-maps">Sparse Grid Maps<a href="#sparse-grid-maps" class="hash-link" aria-label="Direct link to Sparse Grid Maps" title="Direct link to Sparse Grid Maps">​</a></h3>
<p><strong>Issue:</strong></p>
<p>A single LiDAR scan may result in incomplete or sparse occupancy grids, leaving significant areas with unknown occupancy.</p>
<p><strong>Causes:</strong></p>
<ul>
<li>Limited sensor range or resolution.</li>
<li>Occlusions where certain areas are not visible to the sensor.</li>
</ul>
<p><strong>Solutions:</strong></p>
<ol>
<li>
<p><strong>Successive Scans:</strong></p>
<ul>
<li>Combine multiple scans over time to fill in gaps and create a more complete map.</li>
</ul>
</li>
<li>
<p><strong>Precise Localization:</strong></p>
<ul>
<li>Use accurate vehicle localization (e.g., GPS, SLAM techniques) to align successive scans correctly, ensuring seamless map integration.</li>
</ul>
</li>
<li>
<p><strong>Sensor Fusion:</strong></p>
<ul>
<li>Integrate data from multiple sensors (e.g., cameras, radar) to complement LiDAR data and enhance grid density.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-environments">Dynamic Environments<a href="#dynamic-environments" class="hash-link" aria-label="Direct link to Dynamic Environments" title="Direct link to Dynamic Environments">​</a></h3>
<p><strong>Issue:</strong></p>
<p>Geometric methods typically assume a static environment, making them unsuitable for real-world scenarios involving moving objects like pedestrians and vehicles.</p>
<p><strong>Challenges:</strong></p>
<ul>
<li><strong>Moving Obstacles:</strong>
<ul>
<li>Dynamic agents can introduce inconsistencies and noise, leading to inaccurate occupancy probabilities.</li>
</ul>
</li>
<li><strong>Changing Scenes:</strong>
<ul>
<li>Frequent changes in the environment require rapid updates to the occupancy grid, which can be computationally intensive.</li>
</ul>
</li>
</ul>
<p><strong>Solutions:</strong></p>
<ol>
<li>
<p><strong>Particle Filters:</strong></p>
<ul>
<li>Utilize particle filters to model dynamic grid maps, allowing the system to track moving objects and update the map accordingly.</li>
</ul>
</li>
<li>
<p><strong>Temporal Filtering:</strong></p>
<ul>
<li>Implement temporal smoothing techniques to differentiate between transient and persistent changes in the environment.</li>
</ul>
</li>
<li>
<p><strong>Segmentation Algorithms:</strong></p>
<ul>
<li>Apply clustering or segmentation to identify and isolate moving objects from the static background.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-implementation">Example Implementation<a href="#example-implementation" class="hash-link" aria-label="Direct link to Example Implementation" title="Direct link to Example Implementation">​</a></h2>
<p>This section provides a practical example of implementing occupancy grid mapping using geometric inverse sensor models. The example is written in Python and demonstrates the core concepts outlined in the previous sections.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-explanation">Code Explanation<a href="#code-explanation" class="hash-link" aria-label="Direct link to Code Explanation" title="Direct link to Code Explanation">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> matplotlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pyplot </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> plt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example Parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sensor_position </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># Sensor located at the origin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">                            </span><span class="token comment" style="color:#999988;font-style:italic"># Grid size (100x100)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid_resolution </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic"># Each cell represents 0.5 meters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">occupancy_grid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">full</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grid_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Initialize with 50% probability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Inverse Sensor Model Parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">occupied_prob </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic"># High occupancy probability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">free_prob </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain">                            </span><span class="token comment" style="color:#999988;font-style:italic"># Low occupancy probability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">inverse_sensor_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_pos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reflection_point</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Updates the occupancy grid based on the reflection point using the inverse sensor model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - sensor_pos: np.array, position of the sensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - reflection_point: np.array, position of the reflection</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - grid_res: float, resolution of the grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - grid: np.array, occupancy grid to update</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Calculate the angle and distance to the reflection point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    direction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> reflection_point </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> sensor_pos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    distance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">linalg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">norm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    angle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arctan2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">direction</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> direction</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Determine the number of cells to update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_cells </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distance </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Iterate through cells along the line from sensor to reflection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_cells</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Coordinates of the cell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sensor_pos</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> grid_res </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sensor_pos</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> grid_res </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Convert to grid indices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        grid_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        grid_y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Boundary check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> grid_x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> grid_size </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> grid_y </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> grid_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            grid</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">grid_x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> free_prob  </span><span class="token comment" style="color:#999988;font-style:italic"># Assign low probability to free cells</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Assign high occupancy probability to the reflection cell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reflection_grid_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reflection_point</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reflection_grid_y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reflection_point</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> grid_res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> reflection_grid_x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> grid_size </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> reflection_grid_y </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> grid_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        grid</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">reflection_grid_x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reflection_grid_y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> occupied_prob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">binary_bayes_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prior</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> likelihood</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Applies the Binary Bayes filter to update occupancy probabilities.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - prior: float, prior occupancy probability</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - likelihood: float, likelihood based on sensor measurement</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - posterior: float, updated occupancy probability</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    posterior </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">likelihood </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> prior</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">likelihood </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> prior </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> likelihood</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> prior</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> posterior</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Simulated Reflection Points</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reflections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update Occupancy Grid with Reflections</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> reflection </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> reflections</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    occupancy_grid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inverse_sensor_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_position</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reflection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_resolution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> occupancy_grid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Apply Binary Bayes Filter to the entire grid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grid_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> j </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grid_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        occupancy_grid</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binary_bayes_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">occupancy_grid</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> occupancy_grid</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Visualization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">figure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">figsize</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">imshow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">occupancy_grid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> origin</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;lower&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cmap</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;gray&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> extent</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_size </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> grid_resolution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid_size </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> grid_resolution</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Updated Occupancy Grid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xlabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;X (meters)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ylabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Y (meters)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">colorbar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Occupancy Probability&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scatter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_position</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sensor_position</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;red&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> marker</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;x&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Sensor&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">legend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-example">Running the Example<a href="#running-the-example" class="hash-link" aria-label="Direct link to Running the Example" title="Direct link to Running the Example">​</a></h3>
<ol>
<li>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>Ensure you have Python installed (version 3.6 or higher recommended).</li>
<li>Install necessary libraries using pip:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install numpy matplotlib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><strong>Execution:</strong></p>
<ul>
<li>Save the provided code into a file named <code>occupancy_grid_mapping.py</code>.</li>
<li>Run the script using the command:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python occupancy_grid_mapping.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><strong>Expected Output:</strong></p>
<ul>
<li>A visualization window displaying the updated occupancy grid.</li>
<li>The grid shows free spaces in darker shades and occupied cells in lighter shades.</li>
<li>The sensor position is marked with a red &#x27;X&#x27;.</li>
</ul>
</li>
</ol>
<p><strong>Notes:</strong></p>
<ul>
<li><strong>Grid Representation:</strong>
<ul>
<li>The occupancy grid is visualized using a grayscale color map, where lighter areas indicate higher occupancy probabilities.</li>
</ul>
</li>
<li><strong>Extensibility:</strong>
<ul>
<li>This example serves as a foundational implementation. For real-world applications, consider integrating actual LiDAR data, enhancing the inverse sensor model, and incorporating additional filtering techniques.</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-techniques-and-optimizations">Advanced Techniques and Optimizations<a href="#advanced-techniques-and-optimizations" class="hash-link" aria-label="Direct link to Advanced Techniques and Optimizations" title="Direct link to Advanced Techniques and Optimizations">​</a></h2>
<p>To enhance the performance and accuracy of occupancy grid mapping using geometric inverse sensor models, several advanced techniques and optimizations can be employed. This section explores strategies to address common challenges and improve the system&#x27;s robustness.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-non-flat-terrains">Handling Non-Flat Terrains<a href="#handling-non-flat-terrains" class="hash-link" aria-label="Direct link to Handling Non-Flat Terrains" title="Direct link to Handling Non-Flat Terrains">​</a></h3>
<p><strong>Problem:</strong></p>
<p>Non-flat or uneven terrains can complicate ground point removal, leading to inaccurate obstacle detection.</p>
<p><strong>Solutions:</strong></p>
<ol>
<li><strong>Adaptive Ground Filtering:</strong>
<ul>
<li>Dynamically adjust the height threshold based on local terrain slopes.</li>
</ul>
</li>
<li><strong>Surface Normal Estimation:</strong>
<ul>
<li>Calculate the normal vectors of points to distinguish ground from obstacles more effectively.</li>
</ul>
</li>
<li><strong>Multi-Layer Filtering:</strong>
<ul>
<li>Implement multiple filtering layers to separate ground, vegetation, and man-made structures.</li>
</ul>
</li>
</ol>
<p><strong>Implementation Example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sklearn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">linear_model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RANSACRegressor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">remove_ground_points</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">point_cloud</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Removes ground points from the point cloud using RANSAC plane fitting.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - point_cloud: np.array of shape (N, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - non_ground_points: np.array of shape (M, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Extract X and Y coordinates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> point_cloud</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> point_cloud</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># RANSAC for plane fitting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ransac </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RANSACRegressor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ransac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inlier_mask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ransac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inlier_mask_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Separate ground and non-ground points</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    non_ground_points </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> point_cloud</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">~</span><span class="token plain">inlier_mask</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> non_ground_points</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="noise-reduction-in-dynamic-environments">Noise Reduction in Dynamic Environments<a href="#noise-reduction-in-dynamic-environments" class="hash-link" aria-label="Direct link to Noise Reduction in Dynamic Environments" title="Direct link to Noise Reduction in Dynamic Environments">​</a></h3>
<p><strong>Problem:</strong></p>
<p>Dynamic objects introduce noise and inconsistencies in the occupancy grid, reducing mapping accuracy.</p>
<p><strong>Solutions:</strong></p>
<ol>
<li><strong>Temporal Smoothing:</strong>
<ul>
<li>Apply temporal filters (e.g., moving average) to smooth occupancy probabilities over time.</li>
</ul>
</li>
<li><strong>Dynamic Object Tracking:</strong>
<ul>
<li>Track moving objects separately to prevent them from affecting the static occupancy grid.</li>
</ul>
</li>
<li><strong>Outlier Detection:</strong>
<ul>
<li>Identify and discard outlier points that deviate significantly from expected patterns.</li>
</ul>
</li>
</ol>
<p><strong>Implementation Example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">temporal_smoothing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">occupancy_grid_history</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alpha</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Applies temporal smoothing to the occupancy grid using an exponential moving average.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - occupancy_grid_history: list of np.array, history of occupancy grids</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - alpha: float, smoothing factor between 0 and 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - smoothed_grid: np.array, updated occupancy grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smoothed_grid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> occupancy_grid_history</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> grid </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> occupancy_grid_history</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        smoothed_grid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> alpha </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> grid </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> alpha</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> smoothed_grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> smoothed_grid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-directions-ai-based-approaches">Future Directions: AI-Based Approaches<a href="#future-directions-ai-based-approaches" class="hash-link" aria-label="Direct link to Future Directions: AI-Based Approaches" title="Direct link to Future Directions: AI-Based Approaches">​</a></h2>
<p>While geometric inverse sensor models provide a solid foundation for occupancy grid mapping, advancements in artificial intelligence (AI) offer promising alternatives and enhancements. AI-based methods, particularly deep learning, can address the limitations of geometric approaches, especially in complex and dynamic environments.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deep-learning-integration">Deep Learning Integration<a href="#deep-learning-integration" class="hash-link" aria-label="Direct link to Deep Learning Integration" title="Direct link to Deep Learning Integration">​</a></h3>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Handling Complex Scenarios:</strong>
<ul>
<li>Deep learning models can learn intricate patterns and relationships within sensor data, enabling better handling of dynamic and non-flat environments.</li>
</ul>
</li>
<li><strong>Robustness to Noise:</strong>
<ul>
<li>Neural networks can be trained to filter out noise and focus on relevant features, improving mapping accuracy.</li>
</ul>
</li>
<li><strong>Real-Time Processing:</strong>
<ul>
<li>With optimized architectures, AI models can perform real-time occupancy grid mapping even with high-resolution data.</li>
</ul>
</li>
</ul>
<p><strong>Applications:</strong></p>
<ul>
<li><strong>Semantic Occupancy Mapping:</strong>
<ul>
<li>Incorporate semantic information (e.g., identifying specific object types) into the occupancy grid.</li>
</ul>
</li>
<li><strong>Predictive Mapping:</strong>
<ul>
<li>Use temporal data to predict future occupancy states, enhancing navigation strategies.</li>
</ul>
</li>
</ul>
<p><strong>Implementation Example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tensorflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> layers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_occupancy_grid_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_shape</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Creates a deep learning model for occupancy grid mapping.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - input_shape: tuple, shape of the input data (e.g., (height, width, channels))</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - model: tf.keras.Model, compiled neural network model</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Sequential</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Conv2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> activation</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;relu&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input_shape</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">input_shape</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MaxPooling2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Conv2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> activation</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;relu&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MaxPooling2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Conv2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> activation</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;relu&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Flatten</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dense</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> activation</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;relu&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">layers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dense</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> activation</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;sigmoid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Output probability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">optimizer</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;adam&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  loss</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;binary_crossentropy&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  metrics</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;accuracy&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> model</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-models">Hybrid Models<a href="#hybrid-models" class="hash-link" aria-label="Direct link to Hybrid Models" title="Direct link to Hybrid Models">​</a></h3>
<p><strong>Concept:</strong></p>
<p>Combine geometric inverse sensor models with AI-based approaches to leverage the strengths of both methodologies.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li><strong>Enhanced Accuracy:</strong>
<ul>
<li>Utilize geometric models for initial mapping and AI models for refinement.</li>
</ul>
</li>
<li><strong>Scalability:</strong>
<ul>
<li>Distribute computational loads effectively between traditional algorithms and neural networks.</li>
</ul>
</li>
<li><strong>Flexibility:</strong>
<ul>
<li>Adapt to varying environmental conditions by dynamically switching between model components.</li>
</ul>
</li>
</ul>
<p><strong>Implementation Strategy:</strong></p>
<ol>
<li><strong>Initial Mapping:</strong>
<ul>
<li>Use geometric inverse sensor models to generate a preliminary occupancy grid.</li>
</ul>
</li>
<li><strong>AI Refinement:</strong>
<ul>
<li>Apply a trained neural network to refine occupancy probabilities, incorporating contextual information and learned patterns.</li>
</ul>
</li>
<li><strong>Feedback Loop:</strong>
<ul>
<li>Continuously update both models based on new sensor data and mapping outcomes.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Occupancy grid mapping using geometric inverse sensor models remains a foundational technique in robotic perception, offering a mathematically grounded approach to environment representation. By systematically processing 3D LiDAR data, these models provide probabilistic insights into the occupancy states of discrete grid cells, facilitating effective navigation and obstacle avoidance.</p>
<p>However, the inherent limitations of geometric methods, particularly in handling dynamic and complex terrains, necessitate the exploration of alternative and complementary approaches. AI-based methods, especially those leveraging deep learning, present promising avenues to overcome these challenges, enhancing the robustness and adaptability of occupancy grid mapping systems.</p>
<p>For practitioners and enthusiasts, integrating geometric models with advanced AI techniques can lead to more resilient and intelligent autonomous systems, capable of operating seamlessly in diverse and unpredictable environments.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/theory/sensor-data-processing/05_point_cloud_ogm/02_geometric_inverse_sensor.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Point Cloud Occupancy Grid Mapping</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/point_cloud_ogm/deep_inverse_sensor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Point Cloud Occupancy Grid Mapping Using Deep Inverse Sensor Models</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fundamentals-of-occupancy-grid-mapping" class="table-of-contents__link toc-highlight">Fundamentals of Occupancy Grid Mapping</a><ul><li><a href="#what-is-occupancy-grid-mapping" class="table-of-contents__link toc-highlight">What is Occupancy Grid Mapping?</a></li><li><a href="#applications-in-robotics" class="table-of-contents__link toc-highlight">Applications in Robotics</a></li></ul></li><li><a href="#geometric-inverse-sensor-models" class="table-of-contents__link toc-highlight">Geometric Inverse Sensor Models</a><ul><li><a href="#definition-and-overview" class="table-of-contents__link toc-highlight">Definition and Overview</a></li><li><a href="#mathematical-foundations" class="table-of-contents__link toc-highlight">Mathematical Foundations</a></li></ul></li><li><a href="#workflow-for-geometric-occupancy-grid-mapping" class="table-of-contents__link toc-highlight">Workflow for Geometric Occupancy Grid Mapping</a><ul><li><a href="#1-preprocessing-the-point-cloud-removing-ground-points" class="table-of-contents__link toc-highlight">1. Preprocessing the Point Cloud: Removing Ground Points</a></li><li><a href="#2-grid-map-initialization" class="table-of-contents__link toc-highlight">2. Grid Map Initialization</a></li><li><a href="#3-applying-the-inverse-sensor-model" class="table-of-contents__link toc-highlight">3. Applying the Inverse Sensor Model</a></li><li><a href="#4-binary-bayes-filter-for-probability-updates" class="table-of-contents__link toc-highlight">4. Binary Bayes Filter for Probability Updates</a></li></ul></li><li><a href="#challenges-of-the-geometric-approach" class="table-of-contents__link toc-highlight">Challenges of the Geometric Approach</a><ul><li><a href="#sparse-grid-maps" class="table-of-contents__link toc-highlight">Sparse Grid Maps</a></li><li><a href="#dynamic-environments" class="table-of-contents__link toc-highlight">Dynamic Environments</a></li></ul></li><li><a href="#example-implementation" class="table-of-contents__link toc-highlight">Example Implementation</a><ul><li><a href="#code-explanation" class="table-of-contents__link toc-highlight">Code Explanation</a></li><li><a href="#running-the-example" class="table-of-contents__link toc-highlight">Running the Example</a></li></ul></li><li><a href="#advanced-techniques-and-optimizations" class="table-of-contents__link toc-highlight">Advanced Techniques and Optimizations</a><ul><li><a href="#handling-non-flat-terrains" class="table-of-contents__link toc-highlight">Handling Non-Flat Terrains</a></li><li><a href="#noise-reduction-in-dynamic-environments" class="table-of-contents__link toc-highlight">Noise Reduction in Dynamic Environments</a></li></ul></li><li><a href="#future-directions-ai-based-approaches" class="table-of-contents__link toc-highlight">Future Directions: AI-Based Approaches</a><ul><li><a href="#deep-learning-integration" class="table-of-contents__link toc-highlight">Deep Learning Integration</a></li><li><a href="#hybrid-models" class="table-of-contents__link toc-highlight">Hybrid Models</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/cpp/content">C++</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/python/content">Python</a></li></ul></div><div class="col footer__col"><div class="footer__title">Robot Operating System</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros/content">ROS</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros2/content">ROS2</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Autonomous-Connected-Driving" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 - Automated and Connected Driving.</div></div></div></footer></div>
</body>
</html>