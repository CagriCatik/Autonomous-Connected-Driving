<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-theory/connected-driving/collective_cloud_functions/mqtt" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Understanding MQTT Protocol for Connected Mobility | Automated and Connected Driving</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/mqtt"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Understanding MQTT Protocol for Connected Mobility | Automated and Connected Driving"><meta data-rh="true" name="description" content="In the rapidly evolving landscape of connected mobility, efficient and reliable communication protocols are paramount. The Message Queuing Telemetry Transport (MQTT) protocol stands out as a lightweight, scalable solution tailored for the Internet of Things (IoT). This documentation delves into the intricacies of MQTT, exploring its core features, architectural components, quality of service levels, and its seamless integration with the Robot Operating System (ROS). Whether you&#x27;re a beginner embarking on your IoT journey or an advanced developer seeking to optimize your connected mobility systems, this guide offers comprehensive insights to enhance your understanding and application of MQTT."><meta data-rh="true" property="og:description" content="In the rapidly evolving landscape of connected mobility, efficient and reliable communication protocols are paramount. The Message Queuing Telemetry Transport (MQTT) protocol stands out as a lightweight, scalable solution tailored for the Internet of Things (IoT). This documentation delves into the intricacies of MQTT, exploring its core features, architectural components, quality of service levels, and its seamless integration with the Robot Operating System (ROS). Whether you&#x27;re a beginner embarking on your IoT journey or an advanced developer seeking to optimize your connected mobility systems, this guide offers comprehensive insights to enhance your understanding and application of MQTT."><link data-rh="true" rel="icon" href="/Autonomous-Connected-Driving/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/mqtt"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/mqtt" hreflang="en"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/mqtt" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Autonomous-Connected-Driving/blog/rss.xml" title="Automated and Connected Driving RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Autonomous-Connected-Driving/blog/atom.xml" title="Automated and Connected Driving Atom Feed"><link rel="stylesheet" href="/Autonomous-Connected-Driving/assets/css/styles.ce2d5abf.css">
<script src="/Autonomous-Connected-Driving/assets/js/runtime~main.16a4d9cc.js" defer="defer"></script>
<script src="/Autonomous-Connected-Driving/assets/js/main.885e9b68.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Autonomous-Connected-Driving/"><div class="navbar__logo"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/introduction-tools/getting_started">Introduction &amp; Tools</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Sensor Data Processing</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/object-fusion-tracking/getting_started">Object Fusion and Tracking</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/vehicle-guidance/getting_started">Vehicle Guidance</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Connected Driving</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/category/introduction--tools">Tasks</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/cpp/Introduction/syntax">C++</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/python/Intro">Python</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros/introduction">ROS</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros2/intro">ROS2</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/introduction-">Introduction </a><button aria-label="Expand sidebar category &#x27;Introduction &#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Autonomous-Connected-Driving/docs/category/collective-cloud-functions">Collective Cloud Functions</a><button aria-label="Collapse sidebar category &#x27;Collective Cloud Functions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/fundamentals">Introduction to Collective Cloud Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/mqtt">Understanding MQTT Protocol for Connected Mobility</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/v2i-communication">V2I Communication</a><button aria-label="Expand sidebar category &#x27;V2I Communication&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Autonomous-Connected-Driving/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Autonomous-Connected-Driving/docs/category/collective-cloud-functions"><span itemprop="name">Collective Cloud Functions</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Understanding MQTT Protocol for Connected Mobility</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Understanding MQTT Protocol for Connected Mobility</h1></header>
<p>In the rapidly evolving landscape of connected mobility, efficient and reliable communication protocols are paramount. The <strong>Message Queuing Telemetry Transport (MQTT)</strong> protocol stands out as a lightweight, scalable solution tailored for the <strong>Internet of Things (IoT)</strong>. This documentation delves into the intricacies of MQTT, exploring its core features, architectural components, quality of service levels, and its seamless integration with the <strong>Robot Operating System (ROS)</strong>. Whether you&#x27;re a beginner embarking on your IoT journey or an advanced developer seeking to optimize your connected mobility systems, this guide offers comprehensive insights to enhance your understanding and application of MQTT.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mqtt-protocol-overview">MQTT Protocol Overview<a href="#mqtt-protocol-overview" class="hash-link" aria-label="Direct link to MQTT Protocol Overview" title="Direct link to MQTT Protocol Overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-mqtt">What is MQTT?<a href="#what-is-mqtt" class="hash-link" aria-label="Direct link to What is MQTT?" title="Direct link to What is MQTT?">​</a></h3>
<p><strong>MQTT</strong>, short for <strong>Message Queuing Telemetry Transport</strong>, is a lightweight messaging protocol designed to facilitate efficient communication between devices in IoT environments. Initially developed by <strong>IBM</strong> and later standardized by <strong>OASIS</strong>, MQTT employs a <strong>publish/subscribe</strong> messaging model. This paradigm allows devices (clients) to publish messages to specific <strong>topics</strong>, while other devices subscribe to these topics to receive pertinent data. This decoupled communication approach ensures scalability and flexibility, making MQTT ideal for diverse applications ranging from home automation to industrial systems.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-features">Core Features<a href="#core-features" class="hash-link" aria-label="Direct link to Core Features" title="Direct link to Core Features">​</a></h3>
<p>MQTT boasts several features that make it particularly suited for IoT and connected mobility:</p>
<ul>
<li>
<p><strong>Lightweight &amp; Efficient:</strong> Optimized for environments with constrained bandwidth and high latency, MQTT&#x27;s minimal message headers reduce overhead. This efficiency is crucial for <strong>battery-powered IoT devices</strong> and networks with limited resources.</p>
</li>
<li>
<p><strong>Broker-Centric Architecture:</strong> A <strong>centralized broker</strong> manages all message exchanges between publishers and subscribers. Responsibilities include message routing, topic management, and client authentication, simplifying network architecture and enhancing scalability.</p>
</li>
<li>
<p><strong>Topic-Based Communication:</strong> Messages are organized around <strong>topics</strong>, serving as channels for data dissemination. Publishers send messages to specific topics without needing to know the subscribers, while subscribers express interest in topics to receive relevant messages. This abstraction fosters dynamic and flexible interactions among devices.</p>
</li>
<li>
<p><strong>Quality of Service (QoS) Levels:</strong> MQTT offers three QoS levels to guarantee message delivery based on application requirements, balancing reliability with resource consumption.</p>
</li>
<li>
<p><strong>Last Will and Testament (LWT):</strong> Enables clients to notify other clients about unexpected disconnections, enhancing system robustness.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mqtt-architecture-in-connected-mobility">MQTT Architecture in Connected Mobility<a href="#mqtt-architecture-in-connected-mobility" class="hash-link" aria-label="Direct link to MQTT Architecture in Connected Mobility" title="Direct link to MQTT Architecture in Connected Mobility">​</a></h2>
<p>The architecture of MQTT within connected mobility systems is built upon two primary components: the <strong>broker</strong> and the <strong>clients</strong>. This section explores these components in detail and provides a practical example to illustrate their interaction.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-components">Key Components<a href="#key-components" class="hash-link" aria-label="Direct link to Key Components" title="Direct link to Key Components">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h4>
<p>The <strong>broker</strong> serves as the central hub for all MQTT communications. Its primary responsibilities include:</p>
<ul>
<li>
<p><strong>Managing Connections:</strong> Handles client connections and disconnections, maintaining the state of each client.</p>
</li>
<li>
<p><strong>Authenticating Clients:</strong> Ensures that only authorized devices can connect and interact within the network.</p>
</li>
<li>
<p><strong>Encrypting Data Transmissions:</strong> Protects data integrity and privacy through encryption mechanisms.</p>
</li>
<li>
<p><strong>Routing Messages:</strong> Directs messages from publishers to the appropriate subscribers based on topics.</p>
</li>
</ul>
<p>By managing these critical functions, the broker ensures secure, efficient, and reliable data exchange, even in large-scale deployments.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="clients">Clients<a href="#clients" class="hash-link" aria-label="Direct link to Clients" title="Direct link to Clients">​</a></h4>
<p><strong>Clients</strong> are any devices or applications that connect to the MQTT broker. In the context of connected mobility, clients typically include:</p>
<ul>
<li>
<p><strong>Vehicles:</strong> Autonomous or connected cars that publish sensor data and subscribe to control commands.</p>
</li>
<li>
<p><strong>Infrastructure Components:</strong> Traffic lights, road sensors, and other infrastructure elements that communicate with vehicles and cloud services.</p>
</li>
<li>
<p><strong>Sensors:</strong> Devices collecting data such as object detections, environmental conditions, or traffic information.</p>
</li>
</ul>
<p>Clients can both <strong>publish</strong> data to topics and <strong>subscribe</strong> to topics to receive relevant information, facilitating bidirectional communication within the ecosystem.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-setup">Example Setup<a href="#example-setup" class="hash-link" aria-label="Direct link to Example Setup" title="Direct link to Example Setup">​</a></h3>
<p>Consider a scenario where infrastructure sensors are deployed to monitor various aspects of a connected mobility ecosystem. These sensors publish data to specific topics, while cloud-based functions process this data for real-time decision-making.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> paho</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mqtt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mqtt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define the MQTT broker address and port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">broker_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mqtt.example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">broker_port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1883</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize the MQTT client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mqtt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Sensor_A&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Connect to the broker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">broker_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> broker_port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Publish object lists to specific topics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object_list_a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;objects&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;vehicle_1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vehicle_2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pedestrian_1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object_list_b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;objects&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;vehicle_3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bicycle_1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;objectlist_a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">object_list_a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;objectlist_b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">object_list_b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Disconnect after publishing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">disconnect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Explanation of the Setup:</strong></p>
<ul>
<li>
<p><strong>Infrastructure Sensors:</strong> Devices like <code>Sensor_A</code> collect data (e.g., object detections) and publish it to topics such as <code>objectlist_a</code> and <code>objectlist_b</code>.</p>
</li>
<li>
<p><strong>Cloud-Based Collective Functions:</strong> Server-side functions or applications subscribe to these topics to receive the published data. They perform <strong>data fusion</strong> or processing and may publish processed data to other topics for consumption by other clients.</p>
</li>
</ul>
<p>This architecture ensures a seamless flow of information from data sources to processing units, enabling real-time decision-making and responsive actions within the connected mobility ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quality-of-service-qos-in-mqtt">Quality of Service (QoS) in MQTT<a href="#quality-of-service-qos-in-mqtt" class="hash-link" aria-label="Direct link to Quality of Service (QoS) in MQTT" title="Direct link to Quality of Service (QoS) in MQTT">​</a></h2>
<p><strong>Quality of Service (QoS)</strong> levels in MQTT define the guarantees for message delivery between the broker and clients. Understanding QoS is essential for designing reliable and efficient communication systems, especially in environments where message delivery assurance varies based on application requirements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qos-levels">QoS Levels<a href="#qos-levels" class="hash-link" aria-label="Direct link to QoS Levels" title="Direct link to QoS Levels">​</a></h3>
<p>MQTT specifies three QoS levels, each offering different delivery guarantees:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="qos-0-at-most-once">QoS 0: At Most Once<a href="#qos-0-at-most-once" class="hash-link" aria-label="Direct link to QoS 0: At Most Once" title="Direct link to QoS 0: At Most Once">​</a></h4>
<ul>
<li>
<p><strong>Delivery Guarantee:</strong> Messages are delivered <strong>zero or one time</strong>. There is no acknowledgment from the receiver, and the broker does not retry sending the message if delivery fails.</p>
</li>
<li>
<p><strong>Use Cases:</strong> Suitable for non-critical data where occasional message loss is acceptable, such as sensor readings where the latest data is more important than guaranteed delivery.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="qos-1-at-least-once">QoS 1: At Least Once<a href="#qos-1-at-least-once" class="hash-link" aria-label="Direct link to QoS 1: At Least Once" title="Direct link to QoS 1: At Least Once">​</a></h4>
<ul>
<li>
<p><strong>Delivery Guarantee:</strong> Messages are delivered <strong>at least once</strong>. The sender stores the message until it receives an acknowledgment (PUBACK) from the receiver. This ensures that the message is delivered but may result in duplicates if acknowledgments are lost.</p>
</li>
<li>
<p><strong>Use Cases:</strong> Ideal for scenarios where message loss is unacceptable, such as command messages or configuration updates, where receiving the message is critical even if duplicates may occur.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="qos-2-exactly-once">QoS 2: Exactly Once<a href="#qos-2-exactly-once" class="hash-link" aria-label="Direct link to QoS 2: Exactly Once" title="Direct link to QoS 2: Exactly Once">​</a></h4>
<ul>
<li>
<p><strong>Delivery Guarantee:</strong> Messages are delivered <strong>exactly once</strong>. This level involves a four-step handshake process between the sender and receiver to ensure that duplicates are not created.</p>
</li>
<li>
<p><strong>Use Cases:</strong> Best suited for situations requiring absolute reliability and no duplication, such as financial transactions or critical control commands.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trade-offs">Trade-offs<a href="#trade-offs" class="hash-link" aria-label="Direct link to Trade-offs" title="Direct link to Trade-offs">​</a></h3>
<p>While higher QoS levels provide stronger delivery guarantees, they introduce increased latency and resource consumption:</p>
<ul>
<li>
<p><strong>QoS 0:</strong> Lightweight and efficient with no delivery assurance.</p>
</li>
<li>
<p><strong>QoS 1:</strong> Balances reliability with some overhead, suitable for most applications requiring guaranteed delivery without strict duplication avoidance.</p>
</li>
<li>
<p><strong>QoS 2:</strong> Ensures maximum reliability with the highest overhead, suitable for critical applications where duplicate messages can cause significant issues.</p>
</li>
</ul>
<p><strong>Selecting the Appropriate QoS Level:</strong></p>
<p>Choosing the right QoS level depends on the specific requirements of your application, balancing the need for reliability against constraints like network bandwidth and processing power. For instance, in connected mobility:</p>
<ul>
<li>
<p><strong>Sensor Data:</strong> Often suitable for QoS 0 or QoS 1, where occasional data loss is tolerable.</p>
</li>
<li>
<p><strong>Control Commands:</strong> Preferably use QoS 1 or QoS 2 to ensure that critical commands are received reliably.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrating-mqtt-with-ros">Integrating MQTT with ROS<a href="#integrating-mqtt-with-ros" class="hash-link" aria-label="Direct link to Integrating MQTT with ROS" title="Direct link to Integrating MQTT with ROS">​</a></h2>
<p>The <strong>Robot Operating System (ROS)</strong> is a flexible framework widely used in robotics and autonomous systems. ROS employs a <strong>publish/subscribe</strong> communication model similar to MQTT, making their integration both natural and advantageous.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ros-overview">ROS Overview<a href="#ros-overview" class="hash-link" aria-label="Direct link to ROS Overview" title="Direct link to ROS Overview">​</a></h3>
<p><strong>ROS</strong> provides a structured communications layer above the host operating systems of a heterogeneous compute cluster. It facilitates the development of modular, reusable software for robotic applications, enabling seamless interaction between different subsystems such as perception, planning, and control.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-benefits">Integration Benefits<a href="#integration-benefits" class="hash-link" aria-label="Direct link to Integration Benefits" title="Direct link to Integration Benefits">​</a></h3>
<p>Integrating MQTT with ROS offers several advantages:</p>
<ul>
<li>
<p><strong>Enhanced Communication:</strong> MQTT&#x27;s lightweight and efficient messaging complements ROS&#x27;s internal communication, especially for interactions between robots and external systems like cloud services.</p>
</li>
<li>
<p><strong>Scalability:</strong> MQTT&#x27;s broker-centric architecture supports scalable communication across multiple robots and infrastructure components, enhancing the overall system&#x27;s scalability.</p>
</li>
<li>
<p><strong>Interoperability:</strong> MQTT facilitates seamless integration with various IoT devices and cloud platforms, extending the capabilities of ROS-based systems beyond the immediate robotic ecosystem.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-integration-scenario">Example Integration Scenario<a href="#example-integration-scenario" class="hash-link" aria-label="Direct link to Example Integration Scenario" title="Direct link to Example Integration Scenario">​</a></h3>
<p>In an automated driving system, ROS manages internal communication within the vehicle, while MQTT extends communication to external entities such as smart infrastructure and other vehicles. Here&#x27;s how they can work together:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-ros-nodes-as-mqtt-clients">1. ROS Nodes as MQTT Clients<a href="#1-ros-nodes-as-mqtt-clients" class="hash-link" aria-label="Direct link to 1. ROS Nodes as MQTT Clients" title="Direct link to 1. ROS Nodes as MQTT Clients">​</a></h4>
<p>Each ROS node can act as an MQTT client, publishing sensor data to MQTT topics and subscribing to topics for receiving commands or updates from external sources.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rospy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> paho</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mqtt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mqtt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> flags</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;vehicle/commands&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rospy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loginfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Received command: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">payload</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">decode</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Publish to ROS topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ros_pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize ROS node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rospy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">init_node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;mqtt_ros_bridge&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ROS publisher</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rospy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ros_commands&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize MQTT client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mqtt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ROS_Node&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">on_connect </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> on_connect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">on_message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> on_message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Connect to MQTT broker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mqtt.example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1883</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Start MQTT loop in a separate thread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loop_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Keep ROS node running</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rospy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>
<p><strong>ROS Node Initialization:</strong> The ROS node <code>mqtt_ros_bridge</code> initializes and creates a ROS publisher <code>ros_pub</code> to publish commands received from MQTT.</p>
</li>
<li>
<p><strong>MQTT Client Setup:</strong> The MQTT client subscribes to the <code>vehicle/commands</code> topic. Upon receiving a message, it logs the command and publishes it to the ROS topic <code>ros_commands</code>.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-data-fusion-and-processing">2. Data Fusion and Processing<a href="#2-data-fusion-and-processing" class="hash-link" aria-label="Direct link to 2. Data Fusion and Processing" title="Direct link to 2. Data Fusion and Processing">​</a></h4>
<p>Cloud-based collective functions subscribe to multiple MQTT topics, aggregating data from various sources (e.g., multiple vehicles, infrastructure sensors) to perform data fusion. The processed information can then be published back to MQTT topics, which ROS nodes within the vehicles subscribe to for real-time updates and decision-making.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-enhanced-autonomy">3. Enhanced Autonomy<a href="#3-enhanced-autonomy" class="hash-link" aria-label="Direct link to 3. Enhanced Autonomy" title="Direct link to 3. Enhanced Autonomy">​</a></h4>
<p>By integrating MQTT with ROS, autonomous vehicles can communicate with each other and with smart infrastructure, enabling:</p>
<ul>
<li>
<p><strong>Coordinated Maneuvers:</strong> Vehicles can share intent and status, facilitating synchronized actions like platooning or intersection crossing.</p>
</li>
<li>
<p><strong>Traffic Optimization:</strong> Real-time data exchange helps in dynamic traffic management, reducing congestion and improving flow.</p>
</li>
<li>
<p><strong>Improved Safety:</strong> Shared situational awareness enhances collision avoidance and responsive emergency handling.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<p>The synergy between MQTT and ROS creates a robust foundation for building scalable, reliable, and interoperable autonomous systems. By leveraging the strengths of both protocols, developers can design sophisticated connected mobility solutions that are both responsive and resilient, catering to the complex demands of modern transportation ecosystems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="applications-of-mqtt-in-connected-mobility">Applications of MQTT in Connected Mobility<a href="#applications-of-mqtt-in-connected-mobility" class="hash-link" aria-label="Direct link to Applications of MQTT in Connected Mobility" title="Direct link to Applications of MQTT in Connected Mobility">​</a></h2>
<p>MQTT&#x27;s versatility and efficiency have led to its widespread adoption across various industries. In the realm of connected mobility, MQTT plays a pivotal role in enabling real-time data exchange and system integration. This section explores key applications of MQTT in connected mobility.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automotive">Automotive<a href="#automotive" class="hash-link" aria-label="Direct link to Automotive" title="Direct link to Automotive">​</a></h3>
<p>In the automotive industry, MQTT facilitates real-time communication between vehicles and infrastructure, supporting applications such as:</p>
<ul>
<li>
<p><strong>Connected Cars:</strong> Enables vehicles to communicate with each other and with roadside infrastructure, sharing information like speed, location, and traffic conditions.</p>
</li>
<li>
<p><strong>Autonomous Driving:</strong> Supports the exchange of sensor data and control commands between autonomous vehicles and central processing units, enhancing navigation and decision-making.</p>
</li>
<li>
<p><strong>Fleet Management:</strong> Allows fleet operators to monitor vehicle status, track locations, and manage logistics efficiently.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="telecommunications">Telecommunications<a href="#telecommunications" class="hash-link" aria-label="Direct link to Telecommunications" title="Direct link to Telecommunications">​</a></h3>
<p>Within telecommunications, MQTT is utilized for:</p>
<ul>
<li>
<p><strong>Network Monitoring:</strong> Enables efficient transmission of network performance metrics and alerts from various monitoring devices to central management systems.</p>
</li>
<li>
<p><strong>Telecom Infrastructure Management:</strong> Facilitates communication between different telecom infrastructure components, ensuring seamless operations and maintenance.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="smart-manufacturing">Smart Manufacturing<a href="#smart-manufacturing" class="hash-link" aria-label="Direct link to Smart Manufacturing" title="Direct link to Smart Manufacturing">​</a></h3>
<p>In smart manufacturing, MQTT supports industrial automation by connecting machinery, sensors, and control systems:</p>
<ul>
<li>
<p><strong>Industrial IoT (IIoT):</strong> Enables real-time data exchange between factory equipment and monitoring systems, optimizing production processes.</p>
</li>
<li>
<p><strong>Predictive Maintenance:</strong> Facilitates the collection and analysis of equipment data to predict failures and schedule maintenance proactively.</p>
</li>
<li>
<p><strong>Supply Chain Integration:</strong> Enhances visibility and coordination across the supply chain by connecting various stakeholders and systems.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-applications">Other Applications<a href="#other-applications" class="hash-link" aria-label="Direct link to Other Applications" title="Direct link to Other Applications">​</a></h3>
<p>Beyond the aforementioned sectors, MQTT is also employed in:</p>
<ul>
<li>
<p><strong>Smart Cities:</strong> Facilitates communication between various urban systems, including traffic management, utilities, and public services.</p>
</li>
<li>
<p><strong>Healthcare:</strong> Supports telemedicine and remote patient monitoring by enabling reliable data transmission between medical devices and healthcare providers.</p>
</li>
<li>
<p><strong>Energy Management:</strong> Enables efficient monitoring and control of energy consumption in smart grids and renewable energy systems.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tools-and-ecosystem">Tools and Ecosystem<a href="#tools-and-ecosystem" class="hash-link" aria-label="Direct link to Tools and Ecosystem" title="Direct link to Tools and Ecosystem">​</a></h2>
<p>MQTT&#x27;s popularity is bolstered by a rich ecosystem of tools and open-source libraries that simplify its implementation and extend its capabilities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mosquitto">Mosquitto<a href="#mosquitto" class="hash-link" aria-label="Direct link to Mosquitto" title="Direct link to Mosquitto">​</a></h3>
<p><strong>Mosquitto</strong> is a widely used open-source MQTT broker that provides a reliable and efficient platform for MQTT communications. Key features include:</p>
<ul>
<li>
<p><strong>Lightweight:</strong> Suitable for constrained environments and embedded systems.</p>
</li>
<li>
<p><strong>Cross-Platform Support:</strong> Available on various operating systems, including Linux, Windows, and macOS.</p>
</li>
<li>
<p><strong>Security Features:</strong> Supports SSL/TLS for encrypted communications and various authentication mechanisms.</p>
</li>
<li>
<p><strong>Community Support:</strong> Backed by an active community that contributes to its continuous improvement and provides extensive documentation.</p>
</li>
</ul>
<p><strong>Example: Running Mosquitto Broker</strong></p>
<p>To set up a Mosquitto broker on a Linux system:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Update package list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install Mosquitto and Mosquitto clients</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install mosquitto mosquitto-clients</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start Mosquitto service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start mosquitto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable Mosquitto to start on boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable mosquitto</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-source-libraries">Open-Source Libraries<a href="#open-source-libraries" class="hash-link" aria-label="Direct link to Open-Source Libraries" title="Direct link to Open-Source Libraries">​</a></h3>
<p>A plethora of open-source libraries support MQTT across various programming languages, facilitating seamless integration into diverse applications:</p>
<ul>
<li>
<p><strong>Paho MQTT:</strong> Available for languages like Python, Java, JavaScript, and C, Paho provides client implementations for both MQTT v3.1 and v5.0.</p>
</li>
<li>
<p><strong>MQTT.js:</strong> A client library for Node.js and the browser, enabling MQTT communication in JavaScript-based applications.</p>
</li>
<li>
<p><strong>Eclipse MQTT:</strong> Offers a suite of tools and libraries under the Eclipse Foundation, promoting robust MQTT implementations.</p>
</li>
<li>
<p><strong>MQTT.NET:</strong> A high-performance MQTT client library for .NET applications, suitable for Windows and cross-platform development.</p>
</li>
</ul>
<p>These libraries simplify the development process, offering pre-built functions for connecting to brokers, publishing and subscribing to topics, and handling QoS levels.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-1">Conclusion<a href="#conclusion-1" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>The <strong>MQTT protocol</strong> has emerged as a cornerstone in the realm of connected mobility and IoT, offering a lightweight, efficient, and scalable solution for device communication. Its <strong>publish/subscribe</strong> model, combined with robust features like varying <strong>Quality of Service levels</strong> and a <strong>broker-centric architecture</strong>, make it an ideal choice for diverse applications ranging from automotive to smart manufacturing.</p>
<p>Integrating MQTT with frameworks like <strong>ROS</strong> further amplifies its utility, enabling seamless communication between autonomous systems and external infrastructures. The rich ecosystem of tools and open-source libraries ensures that developers have the resources needed to implement and optimize MQTT-based solutions effectively.</p>
<p>As connected mobility continues to evolve, MQTT&#x27;s role in facilitating real-time, reliable, and scalable communication will undoubtedly remain pivotal, driving advancements in autonomous driving, fleet management, smart cities, and beyond.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="glossary">Glossary<a href="#glossary" class="hash-link" aria-label="Direct link to Glossary" title="Direct link to Glossary">​</a></h2>
<ul>
<li>
<p><strong>Broker:</strong> A central server that manages all MQTT message exchanges between publishers and subscribers.</p>
</li>
<li>
<p><strong>Client:</strong> Any device or application that connects to an MQTT broker to publish or subscribe to topics.</p>
</li>
<li>
<p><strong>Publish/Subscribe Model:</strong> A messaging pattern where publishers send messages to topics without knowing the subscribers, and subscribers receive messages by subscribing to topics of interest.</p>
</li>
<li>
<p><strong>QoS (Quality of Service):</strong> Defines the guarantee of message delivery in MQTT, with levels ranging from 0 (At Most Once) to 2 (Exactly Once).</p>
</li>
<li>
<p><strong>Topic:</strong> A string that the broker uses to filter messages for each connected client. Topics are hierarchical and can be structured using slashes (e.g., <code>sensors/temperature</code>).</p>
</li>
<li>
<p><strong>ROS (Robot Operating System):</strong> An open-source framework for developing robotic applications, providing tools and libraries for building complex robot behavior.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/theory/connected-driving/02_collective_cloud_functions/02_mqtt.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/collective_cloud_functions/fundamentals"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to Collective Cloud Functions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Autonomous-Connected-Driving/docs/category/v2i-communication"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">V2I Communication</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mqtt-protocol-overview" class="table-of-contents__link toc-highlight">MQTT Protocol Overview</a><ul><li><a href="#what-is-mqtt" class="table-of-contents__link toc-highlight">What is MQTT?</a></li><li><a href="#core-features" class="table-of-contents__link toc-highlight">Core Features</a></li></ul></li><li><a href="#mqtt-architecture-in-connected-mobility" class="table-of-contents__link toc-highlight">MQTT Architecture in Connected Mobility</a><ul><li><a href="#key-components" class="table-of-contents__link toc-highlight">Key Components</a></li><li><a href="#example-setup" class="table-of-contents__link toc-highlight">Example Setup</a></li></ul></li><li><a href="#quality-of-service-qos-in-mqtt" class="table-of-contents__link toc-highlight">Quality of Service (QoS) in MQTT</a><ul><li><a href="#qos-levels" class="table-of-contents__link toc-highlight">QoS Levels</a></li><li><a href="#trade-offs" class="table-of-contents__link toc-highlight">Trade-offs</a></li></ul></li><li><a href="#integrating-mqtt-with-ros" class="table-of-contents__link toc-highlight">Integrating MQTT with ROS</a><ul><li><a href="#ros-overview" class="table-of-contents__link toc-highlight">ROS Overview</a></li><li><a href="#integration-benefits" class="table-of-contents__link toc-highlight">Integration Benefits</a></li><li><a href="#example-integration-scenario" class="table-of-contents__link toc-highlight">Example Integration Scenario</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li><li><a href="#applications-of-mqtt-in-connected-mobility" class="table-of-contents__link toc-highlight">Applications of MQTT in Connected Mobility</a><ul><li><a href="#automotive" class="table-of-contents__link toc-highlight">Automotive</a></li><li><a href="#telecommunications" class="table-of-contents__link toc-highlight">Telecommunications</a></li><li><a href="#smart-manufacturing" class="table-of-contents__link toc-highlight">Smart Manufacturing</a></li><li><a href="#other-applications" class="table-of-contents__link toc-highlight">Other Applications</a></li></ul></li><li><a href="#tools-and-ecosystem" class="table-of-contents__link toc-highlight">Tools and Ecosystem</a><ul><li><a href="#mosquitto" class="table-of-contents__link toc-highlight">Mosquitto</a></li><li><a href="#open-source-libraries" class="table-of-contents__link toc-highlight">Open-Source Libraries</a></li></ul></li><li><a href="#conclusion-1" class="table-of-contents__link toc-highlight">Conclusion</a></li><li><a href="#glossary" class="table-of-contents__link toc-highlight">Glossary</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/cpp/content">C++</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/python/content">Python</a></li></ul></div><div class="col footer__col"><div class="footer__title">Robot Operating System</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros/content">ROS</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros2/content">ROS2</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Autonomous-Connected-Driving" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 - Automated and Connected Driving.</div></div></div></footer></div>
</body>
</html>