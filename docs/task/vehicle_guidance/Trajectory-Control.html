<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-task/vehicle_guidance/Trajectory-Control" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Trajectory Control | Automated and Connected Driving</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/vehicle_guidance/Trajectory-Control"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Trajectory Control | Automated and Connected Driving"><meta data-rh="true" name="description" content="ROS1"><meta data-rh="true" property="og:description" content="ROS1"><link data-rh="true" rel="icon" href="/Autonomous-Connected-Driving/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/vehicle_guidance/Trajectory-Control"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/vehicle_guidance/Trajectory-Control" hreflang="en"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/vehicle_guidance/Trajectory-Control" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Autonomous-Connected-Driving/blog/rss.xml" title="Automated and Connected Driving RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Autonomous-Connected-Driving/blog/atom.xml" title="Automated and Connected Driving Atom Feed"><link rel="stylesheet" href="/Autonomous-Connected-Driving/assets/css/styles.ce2d5abf.css">
<script src="/Autonomous-Connected-Driving/assets/js/runtime~main.ea8106af.js" defer="defer"></script>
<script src="/Autonomous-Connected-Driving/assets/js/main.20551814.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Autonomous-Connected-Driving/"><div class="navbar__logo"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/introduction-tools/getting_started">Introduction &amp; Tools</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Sensor Data Processing</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/object-fusion-tracking/getting_started">Object Fusion and Tracking</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/vehicle-guidance/getting_started">Vehicle Guidance</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Connected Driving</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Autonomous-Connected-Driving/docs/task/getting_started">Tasks</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Autonomous-Connected-Driving/docs/task/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/introduction--tools">Introduction &amp; Tools</a><button aria-label="Expand sidebar category &#x27;Introduction &amp; Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/sensor-data-processing">Sensor Data Processing</a><button aria-label="Expand sidebar category &#x27;Sensor Data Processing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/object-fusion-tracking">Object Fusion Tracking</a><button aria-label="Expand sidebar category &#x27;Object Fusion Tracking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Autonomous-Connected-Driving/docs/category/vehicle-guidance">Vehicle Guidance</a><button aria-label="Collapse sidebar category &#x27;Vehicle Guidance&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/vehicle_guidance/Trajectory-Control">Trajectory Control</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/connected-driving">Connected Driving</a><button aria-label="Expand sidebar category &#x27;Connected Driving&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Autonomous-Connected-Driving/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Autonomous-Connected-Driving/docs/category/vehicle-guidance"><span itemprop="name">Vehicle Guidance</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Trajectory Control</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Trajectory Control</h1></header>
<p><img decoding="async" loading="lazy" src="https://img.shields.io/badge/ROS1-blue" alt="ROS1" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>In autonomous vehicle systems, maintaining precise control over the vehicle&#x27;s trajectory is paramount for safety and performance. In previous workshops, it was observed that the vehicle occasionally deviates from its planned path, leading to corrective maneuvers that realign it with the desired trajectory. This behavior stems from the implementation of a Bi-Level-Stabilization guidance system. However, the absence of a low-level stabilization controller in earlier sessions meant that the vehicle couldn&#x27;t accurately follow the high-level trajectory planner&#x27;s directives. When deviations exceeded a certain threshold, the Model Predictive Control (MPC) system was reinitialized using the vehicle&#x27;s current state, causing abrupt realignments.</p>
<p>This workshop aims to bridge that gap by implementing a comprehensive low-level stabilization controller, enhancing the vehicle&#x27;s ability to adhere to planned trajectories seamlessly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives">​</a></h2>
<p>By the end of this workshop, participants will be able to:</p>
<ul>
<li><strong>Implement Odometry Equations:</strong> Calculate the lateral and heading deviations of the vehicle relative to the planned trajectory.</li>
<li><strong>Compute Control Deviations:</strong> Utilize target trajectory values and the current vehicle state to determine control deviations.</li>
<li><strong>Derive Discrete PID Controller Output:</strong> Formulate the output equation for a discrete PID controller.</li>
<li><strong>Develop Velocity and Lateral Controllers:</strong> Implement a longitudinal velocity controller and a cascaded lateral controller that determines the desired yaw rate.</li>
<li><strong>Apply Inverse Single-Track Model:</strong> Convert the desired yaw rate into an appropriate steering angle using an inverse single-track model.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The core objective of this workshop is to implement a compensatory feedback controller serving as the low-level stabilization mechanism within the vehicle&#x27;s guidance system. This controller works in tandem with the high-level trajectory planner to ensure smooth and accurate trajectory following.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller-architecture">Controller Architecture<a href="#controller-architecture" class="hash-link" aria-label="Direct link to Controller Architecture" title="Direct link to Controller Architecture">​</a></h3>
<p>The controller&#x27;s architecture is visually represented below:</p>
<p><img decoding="async" loading="lazy" alt="Controller Architecture" src="/Autonomous-Connected-Driving/assets/images/ctr_arc-cf9536dcba0fb3279c2bea747901587b.PNG" width="1086" height="502" class="img_ev3q"></p>
<p>The architecture comprises various components responsible for different aspects of trajectory control. Participants will be required to fill in specific sections within the controller&#x27;s codebase to complete the implementation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository-and-codebase">Repository and Codebase<a href="#repository-and-codebase" class="hash-link" aria-label="Direct link to Repository and Codebase" title="Direct link to Repository and Codebase">​</a></h3>
<p>The foundational code for this workshop is hosted on GitHub. Participants should focus on the following files, which contain designated gaps to be filled:</p>
<ul>
<li><strong>Trajectory Controller:</strong> <a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp</a></li>
<li><strong>PID Controller:</strong> <a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/PID.cpp" target="_blank" rel="noopener noreferrer">PID.cpp</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tasks">Tasks<a href="#tasks" class="hash-link" aria-label="Direct link to Tasks" title="Direct link to Tasks">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-implementation-of-odometry-equations">Task 1: Implementation of Odometry Equations<a href="#task-1-implementation-of-odometry-equations" class="hash-link" aria-label="Direct link to Task 1: Implementation of Odometry Equations" title="Direct link to Task 1: Implementation of Odometry Equations">​</a></h3>
<p><strong>Objective:</strong> Implement the odometry equations to determine the vehicle&#x27;s lateral (<code>dy_</code>) and heading (<code>dpsi_</code>) deviations from the planned trajectory.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>TrajectoryCtrl.cpp</code> file and locate line 242:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp#L242" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp at Line 242</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 1 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double yawRate = cur_vehicle_state_.yaw_rate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double velocity = cur_vehicle_state_.velocity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">odom_dy_ += sin(dpsi_ + 0.5 * yawRate * dt) * (velocity * dt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">odom_dpsi_ += yawRate * dt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 1 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li>
<p><strong>Variables:</strong></p>
<ul>
<li><code>yawRate</code>: Current yaw rate of the vehicle.</li>
<li><code>velocity</code>: Current velocity of the vehicle.</li>
<li><code>dt</code>: Time step since the last odometry update.</li>
</ul>
</li>
<li>
<p><strong>Formulas:</strong></p>
<ul>
<li><strong>Lateral Movement:</strong></li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mi>y</mi><mo>=</mo><mi>sin</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mi>d</mi><mi>ψ</mi><mo>+</mo><mn>0.5</mn><mo>⋅</mo><mover accent="true"><mi>ψ</mi><mo>˙</mo></mover><mo>⋅</mo><mi>d</mi><mi>t</mi><mo fence="true">)</mo></mrow><mo>⋅</mo><mi>d</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">dy = \sin\left(d\psi + 0.5 \cdot \dot{\psi} \cdot dt\right) \cdot ds</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size2">(</span></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">0.5</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9313em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0278em"><span class="mord">˙</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">s</span></span></span></span></span>
<p>Where ( ds = velocity \cdot dt ) is the distance traveled since the last update.</p>
<ul>
<li><strong>Heading Change:</strong></li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mi>ψ</mi><mo>=</mo><mover accent="true"><mi>ψ</mi><mo>˙</mo></mover><mo>⋅</mo><mi>d</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">d\psi = \dot{\psi} \cdot dt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1257em;vertical-align:-0.1944em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9313em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0278em"><span class="mord">˙</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span></span></span>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-calculate-the-control-deviations">Task 2: Calculate the Control Deviations<a href="#task-2-calculate-the-control-deviations" class="hash-link" aria-label="Direct link to Task 2: Calculate the Control Deviations" title="Direct link to Task 2: Calculate the Control Deviations">​</a></h3>
<p><strong>Objective:</strong> Utilize the odometry outputs to compute the vehicle&#x27;s deviations from the current trajectory.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>TrajectoryCtrl.cpp</code> file and locate line 196:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp#L196" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp at Line 196</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 2 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// calculate vehicle deviations from the trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dy_ = odom_dy_ - target_dy;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dpsi_ = odom_dpsi_ - target_dpsi;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 2 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li><strong>Variables:</strong>
<ul>
<li><code>odom_dy_</code>: Calculated lateral deviation from odometry.</li>
<li><code>odom_dpsi_</code>: Calculated heading deviation from odometry.</li>
<li><code>target_dy</code>: Desired lateral position from the trajectory.</li>
<li><code>target_dpsi</code>: Desired heading from the trajectory.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3-implement-the-output-equation-of-a-discrete-pid-controller">Task 3: Implement the Output Equation of a Discrete PID Controller<a href="#task-3-implement-the-output-equation-of-a-discrete-pid-controller" class="hash-link" aria-label="Direct link to Task 3: Implement the Output Equation of a Discrete PID Controller" title="Direct link to Task 3: Implement the Output Equation of a Discrete PID Controller">​</a></h3>
<p><strong>Objective:</strong> Develop the output equation for a discrete PID controller to establish a feedback control loop based on the calculated deviations.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>PID.cpp</code> file and locate line 44:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/PID.cpp#L44" target="_blank" rel="noopener noreferrer">PID.cpp at Line 44</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 3 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i_val_ += e * dt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double d_val = (e - prev_e_) / dt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prev_e_ = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return Kp_ * e + Ki_ * i_val_ + Kd_ * d_val;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 3 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li>
<p><strong>Variables:</strong></p>
<ul>
<li><code>e</code>: Controller error.</li>
<li><code>i_val_</code>: Integral of the controller error.</li>
<li><code>d_val</code>: Derivative of the controller error.</li>
<li><code>Kp_</code>, <code>Ki_</code>, <code>Kd_</code>: Proportional, Integral, and Derivative gains respectively.</li>
</ul>
</li>
<li>
<p><strong>Equation:</strong></p>
</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Output</mtext><mo>=</mo><msub><mi>K</mi><mi>p</mi></msub><mo>⋅</mo><mi>e</mi><mo>+</mo><msub><mi>K</mi><mi>i</mi></msub><mo>⋅</mo><mo>∫</mo><mi>e</mi><mtext> </mtext><mi>d</mi><mi>t</mi><mo>+</mo><msub><mi>K</mi><mi>d</mi></msub><mo>⋅</mo><mfrac><mrow><mi>d</mi><mi>e</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">  \text{Output} = K_p \cdot e + K_i \cdot \int e \, dt + K_d \cdot \frac{de}{dt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Output</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.2222em;vertical-align:-0.8622em"></span><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-4-longitudinal-velocity-controller">Task 4: Longitudinal Velocity Controller<a href="#task-4-longitudinal-velocity-controller" class="hash-link" aria-label="Direct link to Task 4: Longitudinal Velocity Controller" title="Direct link to Task 4: Longitudinal Velocity Controller">​</a></h3>
<p><strong>Objective:</strong> Implement a longitudinal velocity controller using the PID controller to manage the vehicle&#x27;s speed.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>TrajectoryCtrl.cpp</code> file and locate line 345:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp#L345" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp at Line 345</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 4 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double dt = ros::Time::now().toSec() - vhcl_ctrl_output_.header.stamp.toSec();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double velocity = cur_vehicle_state_.velocity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double w_v = v_tgt_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double e_v = w_v - velocity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double a_fb_v = dv_pid.Calc(e_v, dt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 4 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li><strong>Variables:</strong>
<ul>
<li><code>w_v</code>: Desired (target) velocity.</li>
<li><code>velocity</code>: Current vehicle velocity.</li>
<li><code>e_v</code>: Velocity error.</li>
<li><code>a_fb_v</code>: Feedback acceleration command.</li>
</ul>
</li>
<li><strong>PID Controller Instance:</strong>
<ul>
<li><code>dv_pid</code>: Instance of the velocity PID controller.</li>
<li>Method: <code>Calc(double e, double dt)</code> computes the PID output based on the error and time step.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-5-cascaded-lateral-controller">Task 5: Cascaded Lateral Controller<a href="#task-5-cascaded-lateral-controller" class="hash-link" aria-label="Direct link to Task 5: Cascaded Lateral Controller" title="Direct link to Task 5: Cascaded Lateral Controller">​</a></h3>
<p><strong>Objective:</strong> Develop a cascaded lateral feedback controller that computes the desired yaw rate based on lateral and heading deviations.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>TrajectoryCtrl.cpp</code> file and locate line 262:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp#L262" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp at Line 262</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 5 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double dt = (ros::Time::now() - vhcl_ctrl_output_.header.stamp).toSec();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double w_y = 0.0; // Desired lateral position can be set or computed as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double e_y = dy_ - w_y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double w_psi = 0.0; // Desired heading can be set or computed as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double e_psi = dpsi_ - w_psi;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double psi_dot_des = dy_pid.Calc(e_y, dt) + dpsi_pid.Calc(e_psi, dt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 5 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li><strong>Variables:</strong>
<ul>
<li><code>dy_</code>: Lateral deviation from the trajectory.</li>
<li><code>dpsi_</code>: Heading deviation from the trajectory.</li>
<li><code>w_y</code>: Desired lateral position (often set to zero if following the trajectory precisely).</li>
<li><code>w_psi</code>: Desired heading (often aligned with the trajectory&#x27;s heading).</li>
<li><code>psi_dot_des</code>: Desired yaw rate computed from the PID controllers.</li>
</ul>
</li>
<li><strong>PID Controller Instances:</strong>
<ul>
<li><code>dy_pid</code>: PID controller for lateral deviation.</li>
<li><code>dpsi_pid</code>: PID controller for heading deviation.</li>
</ul>
</li>
<li><strong>Method:</strong>
<ul>
<li><code>Calc(double e, double dt)</code> computes the PID output based on the error and time step.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-6-inverse-single-track-model">Task 6: Inverse Single-Track Model<a href="#task-6-inverse-single-track-model" class="hash-link" aria-label="Direct link to Task 6: Inverse Single-Track Model" title="Direct link to Task 6: Inverse Single-Track Model">​</a></h3>
<p><strong>Objective:</strong> Convert the desired yaw rate into an appropriate steering angle using the inverse single-track (bicycle) model.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Navigate to the Code:</strong>
Open the <code>TrajectoryCtrl.cpp</code> file and locate line 287:
<a href="https://github.com/ika-rwth-aachen/acdc/blob/main/catkin_workspace/src/workshops/section_4/trajectory_ctrl/src/TrajectoryCtrl.cpp#L287" target="_blank" rel="noopener noreferrer">TrajectoryCtrl.cpp at Line 287</a></p>
</li>
<li>
<p><strong>Fill in the Gaps:</strong></p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// START TASK 6 CODE HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// use helping comments from Wiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double st_ang_pid = (psi_dot_des * (wheelbase_ + self_st_gradient_ * velocity * velocity)) / velocity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// END TASK 6 CODE HERE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Hints:</strong></p>
<ul>
<li><strong>Variables:</strong>
<ul>
<li><code>self_st_gradient_</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mi>G</mi></mrow><annotation encoding="application/x-tex">EG</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">EG</span></span></span></span>: Vehicle&#x27;s self-steering gradient.</li>
<li><code>wheelbase_</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span></span></span></span>: Distance between the front and rear axles.</li>
<li><code>velocity</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span>: Current velocity of the vehicle.</li>
<li><code>psi_dot_des</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>ψ</mi><mo>˙</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\dot{\psi}_{des}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1257em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9313em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0278em"><span class="mord">˙</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span>: Desired yaw rate.</li>
</ul>
</li>
<li><strong>Formula:</strong></li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>δ</mi><mo>=</mo><mover accent="true"><mi>ψ</mi><mo>˙</mo></mover><mo>⋅</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>l</mi><mo>+</mo><mi>E</mi><mi>G</mi><mo>⋅</mo><msup><mi>v</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><mi>v</mi></mfrac></mrow><annotation encoding="application/x-tex">  \delta = \dot{\psi} \cdot \frac{(l + EG \cdot v^2)}{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03785em">δ</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1257em;vertical-align:-0.1944em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9313em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0278em"><span class="mord">˙</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">EG</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<p>Where ( \delta ) is the steering angle.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-and-simulation">Execution and Simulation<a href="#execution-and-simulation" class="hash-link" aria-label="Direct link to Execution and Simulation" title="Direct link to Execution and Simulation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-workspace">Building the Workspace<a href="#building-the-workspace" class="hash-link" aria-label="Direct link to Building the Workspace" title="Direct link to Building the Workspace">​</a></h3>
<p>Once all tasks are completed, it&#x27;s time to build the workspace and run the simulation to observe the controller in action.</p>
<ol>
<li>
<p><strong>Start the Docker Container:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd acdc/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./ros1_run.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Build the Workspace:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">catkin build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source devel/setup.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Note: Ensure you source the setup file in every new terminal session.</em></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-simulation">Running the Simulation<a href="#running-the-simulation" class="hash-link" aria-label="Direct link to Running the Simulation" title="Direct link to Running the Simulation">​</a></h3>
<ol>
<li>
<p><strong>Launch the Vehicle Guidance System:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch trajectory_planner vehicle_guidance.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Introduce Dynamic Objects:</strong>
In a separate terminal within the Docker container, play a pre-recorded bag file to simulate dynamic obstacles:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rosbag play ~/ws/bag/acdc_fusion_guidance_noise.bag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expected-outcome">Expected Outcome<a href="#expected-outcome" class="hash-link" aria-label="Direct link to Expected Outcome" title="Direct link to Expected Outcome">​</a></h3>
<p>Upon successful implementation and execution, the vehicle should adhere closely to the planned trajectory, demonstrating improved stability and control compared to previous configurations. The simulation should resemble the following:</p>
<p><img decoding="async" loading="lazy" alt="Solution" src="/Autonomous-Connected-Driving/assets/images/sol_control-d4c6daa4c1c52786190644cc43473c7a.gif" width="666" height="360" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-task">Bonus Task<a href="#bonus-task" class="hash-link" aria-label="Direct link to Bonus Task" title="Direct link to Bonus Task">​</a></h2>
<p>Enhance your understanding of the controller&#x27;s dynamics by experimenting with real-time parameter adjustments.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps:<a href="#steps" class="hash-link" aria-label="Direct link to Steps:" title="Direct link to Steps:">​</a></h3>
<ol>
<li>
<p><strong>Open Dynamic Reconfigure Interface:</strong>
In a new terminal, execute:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source devel/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rosrun rqt_reconfigure rqt_reconfigure</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Adjust Parameters:</strong>
A graphical interface will appear, allowing you to tweak various parameters of the trajectory planner and controller. Key adjustments include:</p>
<ul>
<li><strong>Controller Gains:</strong>
<ul>
<li>Set <code>dv_P</code>, <code>dv_I</code>, <code>dv_D</code>, etc., to zero to disable feedback control, reverting to behavior observed in earlier workshops.</li>
</ul>
</li>
<li><strong>Deviation Parameters:</strong>
<ul>
<li>Set <code>deviationMax...</code> parameters to zero, making the MPC reinitialize every optimization step and disable low-level stabilization.</li>
</ul>
</li>
<li><strong>Cost Function Weights:</strong>
<ul>
<li>Modify the weights and reference factors to observe their impact on trajectory adherence and control smoothness.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Observe Effects:</strong>
Monitor how changes influence the vehicle&#x27;s behavior in the simulation. This hands-on experience solidifies the understanding of controller dynamics and the significance of each parameter.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrap-up">Wrap-up<a href="#wrap-up" class="hash-link" aria-label="Direct link to Wrap-up" title="Direct link to Wrap-up">​</a></h2>
<p>Through this workshop, participants have:</p>
<ul>
<li><strong>Implemented Odometry Equations:</strong> Calculated lateral and heading deviations relative to the planned trajectory.</li>
<li><strong>Computed Control Deviations:</strong> Utilized trajectory targets and vehicle state to determine necessary control adjustments.</li>
<li><strong>Developed a Discrete PID Controller:</strong> Formulated and implemented the output equation for effective feedback control.</li>
<li><strong>Established Velocity and Lateral Controllers:</strong> Created controllers for managing longitudinal speed and lateral positioning, culminating in the computation of desired yaw rates.</li>
<li><strong>Applied the Inverse Single-Track Model:</strong> Translated desired yaw rates into steering angles, completing the control loop for trajectory adherence.</li>
</ul>
<p>These skills are foundational for developing robust autonomous vehicle systems capable of precise and reliable trajectory following.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<ul>
<li>
<p><strong>Control Toolbox:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@article{adrlCT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title={The control toolbox — An open-source C++ library for robotics, optimal and model predictive control},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  author={Markus Giftthaler and Michael Neunert and Markus St{\&quot;a}uble and Jonas Buchli},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal={2018 IEEE International Conference on Simulation, Modeling, and Programming for Autonomous Robots (SIMPAR)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  year={2018},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pages={123-129}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Flatland:</strong> <a href="https://github.com/avidbots/flatland" target="_blank" rel="noopener noreferrer">https://github.com/avidbots/flatland</a></p>
</li>
<li>
<p><strong>ROS (Robot Operating System):</strong> <a href="https://www.ros.org" target="_blank" rel="noopener noreferrer">https://www.ros.org</a></p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/task/04_vehicle_guidance/01_Trajectory-Control.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Autonomous-Connected-Driving/docs/category/vehicle-guidance"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Vehicle Guidance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Autonomous-Connected-Driving/docs/category/connected-driving"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Connected Driving</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#controller-architecture" class="table-of-contents__link toc-highlight">Controller Architecture</a></li><li><a href="#repository-and-codebase" class="table-of-contents__link toc-highlight">Repository and Codebase</a></li></ul></li><li><a href="#tasks" class="table-of-contents__link toc-highlight">Tasks</a><ul><li><a href="#task-1-implementation-of-odometry-equations" class="table-of-contents__link toc-highlight">Task 1: Implementation of Odometry Equations</a></li><li><a href="#task-2-calculate-the-control-deviations" class="table-of-contents__link toc-highlight">Task 2: Calculate the Control Deviations</a></li><li><a href="#task-3-implement-the-output-equation-of-a-discrete-pid-controller" class="table-of-contents__link toc-highlight">Task 3: Implement the Output Equation of a Discrete PID Controller</a></li><li><a href="#task-4-longitudinal-velocity-controller" class="table-of-contents__link toc-highlight">Task 4: Longitudinal Velocity Controller</a></li><li><a href="#task-5-cascaded-lateral-controller" class="table-of-contents__link toc-highlight">Task 5: Cascaded Lateral Controller</a></li><li><a href="#task-6-inverse-single-track-model" class="table-of-contents__link toc-highlight">Task 6: Inverse Single-Track Model</a></li></ul></li><li><a href="#execution-and-simulation" class="table-of-contents__link toc-highlight">Execution and Simulation</a><ul><li><a href="#building-the-workspace" class="table-of-contents__link toc-highlight">Building the Workspace</a></li><li><a href="#running-the-simulation" class="table-of-contents__link toc-highlight">Running the Simulation</a></li><li><a href="#expected-outcome" class="table-of-contents__link toc-highlight">Expected Outcome</a></li></ul></li><li><a href="#bonus-task" class="table-of-contents__link toc-highlight">Bonus Task</a><ul><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps:</a></li></ul></li><li><a href="#wrap-up" class="table-of-contents__link toc-highlight">Wrap-up</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/cpp/content">C++</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/python/content">Python</a></li></ul></div><div class="col footer__col"><div class="footer__title">Robot Operating System</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros/content">ROS</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros2/content">ROS2</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Autonomous-Connected-Driving" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 - Automated and Connected Driving.</div></div></div></footer></div>
</body>
</html>