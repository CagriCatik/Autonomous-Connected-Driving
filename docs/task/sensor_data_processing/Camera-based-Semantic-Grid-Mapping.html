<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Camera-based Semantic Grid Mapping | Automated and Connected Driving</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Camera-based Semantic Grid Mapping | Automated and Connected Driving"><meta data-rh="true" name="description" content="ROS2  Instructions"><meta data-rh="true" property="og:description" content="ROS2  Instructions"><link data-rh="true" rel="icon" href="/Autonomous-Connected-Driving/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping" hreflang="en"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Autonomous-Connected-Driving/blog/rss.xml" title="Automated and Connected Driving RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Autonomous-Connected-Driving/blog/atom.xml" title="Automated and Connected Driving Atom Feed"><link rel="stylesheet" href="/Autonomous-Connected-Driving/assets/css/styles.ce2d5abf.css">
<script src="/Autonomous-Connected-Driving/assets/js/runtime~main.effd47cc.js" defer="defer"></script>
<script src="/Autonomous-Connected-Driving/assets/js/main.62095f23.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Autonomous-Connected-Driving/"><div class="navbar__logo"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/introduction-tools/getting_started">Introduction &amp; Tools</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Sensor Data Processing</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/object-fusion-tracking/getting_started">Object Fusion and Tracking</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/vehicle-guidance/getting_started">Vehicle Guidance</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Connected Driving</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Autonomous-Connected-Driving/docs/task/getting_started">Tasks</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Autonomous-Connected-Driving/docs/task/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/introduction--tools">Introduction &amp; Tools</a><button aria-label="Expand sidebar category &#x27;Introduction &amp; Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Autonomous-Connected-Driving/docs/category/sensor-data-processing">Sensor Data Processing</a><button aria-label="Collapse sidebar category &#x27;Sensor Data Processing&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Camera-based-Semantic-Grid-Mapping">Camera-based Semantic Grid Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Deep-OGM">Deep Learning-based Point Cloud Occupancy Grid Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Geometric-OGM">Geometric Point Cloud Occupancy Grid Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Object-Detection">Object Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Semantic-Image-Segmentation">Semantic Image Segmentation Applied on Camera Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Semantic-Point-Cloud-Segmentation">Perform Deep Learning Based Semantic Point Cloud Segmentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/object-fusion-tracking">Object Fusion Tracking</a><button aria-label="Expand sidebar category &#x27;Object Fusion Tracking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/vehicle-guidance">Vehicle Guidance</a><button aria-label="Expand sidebar category &#x27;Vehicle Guidance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/connected-driving">Connected Driving</a><button aria-label="Expand sidebar category &#x27;Connected Driving&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Autonomous-Connected-Driving/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Autonomous-Connected-Driving/docs/category/sensor-data-processing"><span itemprop="name">Sensor Data Processing</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Camera-based Semantic Grid Mapping</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Camera-based Semantic Grid Mapping</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ros2--instructions"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/ROS2-red" alt="ROS2" class="img_ev3q">  Instructions<a href="#ros2--instructions" class="hash-link" aria-label="Direct link to ros2--instructions" title="Direct link to ros2--instructions">​</a></h2>
<p><strong>Perform Camera-based Semantic Grid Mapping using geometry-based inverse perspective mapping</strong></p>
<p>In this workshop, we will perform <strong>semantic grid mapping</strong> based on images taken by vehicle-mounted cameras.
The approach will make use of inverse perspective mapping (IPM).</p>
<p>We will use a recording from a simulation containing images from eight cameras.</p>
<p>The learning goals of this workshop are ...</p>
<ul>
<li>Inspecting a rosbag which contains camera data</li>
<li>Learn about the ROS2 message format for camera images and camera infos</li>
<li>Learn about synchronized subscribers</li>
<li>Learn how to use the tf2 library</li>
<li>Learn how to visualize the output of semantic grid mapping</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-this-workshop">Introduction to this workshop<a href="#introduction-to-this-workshop" class="hash-link" aria-label="Direct link to Introduction to this workshop" title="Direct link to Introduction to this workshop">​</a></h3>
<p>We prepared a rosbag with camera data for you to use.</p>
<p>Download the file <code>semantic_8_cams.db3</code> from <a href="https://rwth-aachen.sciebo.de/s/Fzsu2uLpqApG1ru" target="_blank" rel="noopener noreferrer"><strong>here (684.1 MB)</strong></a>.</p>
<p>Save this file to your local directory <code>${REPOSITORY}/bag</code>. This directory will be mounted into the docker container to the path <code>/home/rosuser/ws/bag</code>.</p>
<p>After the download, navigate to the local directory <code>${REPOSITORY}/docker</code> on your host and execute <code>./ros2_run.sh</code> to start the ACDC docker container.</p>
<p>Inside the container, you can navigate to <code>/home/rosuser/ws/bag</code> and execute <code>ros2 bag info semantic_8_cams.db3</code> to inspect the rosbag:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Files:             semantic_8_cams.db3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bag size:          684.1 MiB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage id:        sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Duration:          7.450s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start:             Jan  1 1970 01:00:26.592 (26.592)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End:               Jan  1 1970 01:00:34.42 (34.42)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Messages:          4622</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic information: Topic: /carla/ego_vehicle/rgb_view/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/rgb_view/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_left_1/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_left_1/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_left_2/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_left_2/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_right_1/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_right_1/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_right_2/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_back_right_2/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_left_1/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_left_1/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_left_2/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_left_2/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_right_1/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_right_1/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_right_2/camera_info | Type: sensor_msgs/msg/CameraInfo | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /carla/ego_vehicle/semantic_segmentation_front_right_2/image | Type: sensor_msgs/msg/Image | Count: 149 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /clock | Type: rosgraph_msgs/msg/Clock | Count: 150 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /rosout | Type: rosgraph_msgs/msg/Log | Count: 2 | Serialization Format: cdr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Topic: /tf | Type: tf2_msgs/msg/TFMessage | Count: 1788 | Serialization Format: cdr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can see that the rosbag has a duration of 7.5 seconds and contains segmented images of type <code>sensor_msgs/msg/Image</code> and corresponding <code>sensor_msgs/msg/CameraInfo</code> messages.
We will use these camera images in this assignment in order to apply semantic grid mapping.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ros2s-sensor_msgsmsgimage-message">ROS2&#x27;s <code>sensor_msgs/msg/Image</code> Message<a href="#ros2s-sensor_msgsmsgimage-message" class="hash-link" aria-label="Direct link to ros2s-sensor_msgsmsgimage-message" title="Direct link to ros2s-sensor_msgsmsgimage-message">​</a></h3>
<p>The message definition <a href="https://docs.ros2.org/latest/api/sensor_msgs/msg/Image.html" target="_blank" rel="noopener noreferrer">sensor_msgs/msg/Image</a> is ROS2&#x27;s standard image message format. It is used for all kind of camera image message types and can be used seamlessly with many different ROS2 visualization and image processing tools. Please read the documentation about the <a href="https://docs.ros2.org/latest/api/sensor_msgs/msg/Image.html" target="_blank" rel="noopener noreferrer">detailed message format</a> and it&#x27;s content.
Message</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ros2s-sensor_msgsmsgcamerainfo-message">ROS2&#x27;s <code>sensor_msgs/msg/CameraInfo</code> Message<a href="#ros2s-sensor_msgsmsgcamerainfo-message" class="hash-link" aria-label="Direct link to ros2s-sensor_msgsmsgcamerainfo-message" title="Direct link to ros2s-sensor_msgsmsgcamerainfo-message">​</a></h3>
<p>The message definition <a href="hhttps://docs.ros2.org/latest/api/sensor_msgs/msg/CameraInfo.html" target="_blank" rel="noopener noreferrer">sensor_msgs/msg/CameraInfo</a> is ROS2&#x27;s standard camera info message format. It is send together with <code>sensor_msgs/msg/Image</code> to provide additional information about the current camera image such as <strong>camera calibration parameters</strong>. Feel free to read the documentation about the <a href="https://docs.ros2.org/latest/api/sensor_msgs/msg/CameraInfo.html" target="_blank" rel="noopener noreferrer">detailed message format</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package">Task 1: Explore the semantic grid mapping package and build and source the package<a href="#task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package" class="hash-link" aria-label="Direct link to Task 1: Explore the semantic grid mapping package and build and source the package" title="Direct link to Task 1: Explore the semantic grid mapping package and build and source the package">​</a></h3>
<p>The code for the camera-based semantic grid mapping node can be found in the directory <code>colcon_workspace_src/section_2/camera_based_semantic_grid_mapping_r2</code>.</p>
<p>The main source code is located in the directory <code>camera_based_semantic_grid_mapping_r2</code>. The launch file are located in directory <code>launch</code>and parameters are located in <code>config</code>. Feel free to read all the code, parameters and launch files.</p>
<p>Now, in the container, navigate to <code>colcon_workspace</code> and build the package with with <code>colcon build</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">colcon build --packages-select camera_based_semantic_grid_mapping_r2 --symlink-install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and source the workspace</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source install/setup.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Perfect! Now you will be able to perform semantic grid mapping using camera images with this package. Let&#x27;s go to the next task.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node">Task 2: Replay rosbag and run the camera-based grid mapping node<a href="#task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node" class="hash-link" aria-label="Direct link to Task 2: Replay rosbag and run the camera-based grid mapping node" title="Direct link to Task 2: Replay rosbag and run the camera-based grid mapping node">​</a></h3>
<p>We have already prepared a launch file for you to execute the camera-based semantic grid mapping package. Please read through the following lines of code carefully.</p>
<p>Contents of the file <code>semantic_grid_mapping.launch.py</code>:</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch_ros</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DeclareLaunchArgument</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ExecuteProcess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ament_index_python</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">packages </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_package_share_directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate_launch_description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get the package and params directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    semantic_grid_mapping_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_package_share_directory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;camera_based_semantic_grid_mapping_r2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">semantic_grid_mapping_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;config&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;params.yaml&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Declare launch arguments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_sim_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DeclareLaunchArgument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;use_sim_time&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Use simulation clock time&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ROSBAG PLAY node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rosbag_play_node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ExecuteProcess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ros2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bag&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;play&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--rate&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;0.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;-l&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token string" style="color:#e3116c">&#x27;/home/rosuser/bag/semantic_8_cams.db3&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># SEMANTIC GRID MAPPING NODE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    semantic_grid_mapping_node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;camera_based_semantic_grid_mapping_r2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;camera_based_semantic_grid_mapping&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;semantic_grid_mapping&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># NODES FOR VISUALIZATION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    front_left_segmented_image_node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;front_left_segmented_image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remappings</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;carla/ego_vehicle/semantic_segmentation_front_left_1/image&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    front_right_segmented_image_node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;front_right_segmented_image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remappings</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;carla/ego_vehicle/semantic_segmentation_front_right_1/image&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    segmentation_viewer_node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;image_view&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;segmentation_viewer&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remappings</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;image&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;BEV_image&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;autosize&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create the launch description and populate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LaunchDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Add the actions to the launch description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">use_sim_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rosbag_play_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">semantic_grid_mapping_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">front_left_segmented_image_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">front_right_segmented_image_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">segmentation_viewer_node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Hence, we perform the following tasks:</p>
<ul>
<li>
<p><strong>Replay the rosbag</strong> with a speed of 0.1. Note, that we set the speed to a very low value here, because your computer might be very slow. You can increase this value if your computer is fast enough to compute the semantic grid map at a higher speed. If necessary, you may also reduce the value.</p>
</li>
<li>
<p><strong>Start the <code>camera_based_semantic_grid_mapping </code> Node</strong> and load the parameters(camera image and info topic names, output image size etc.) that are necessary for the node.</p>
</li>
<li>
<p><strong>Start a visualization node</strong> to show the result</p>
</li>
</ul>
<p>The node <code>camera_based_semantic_grid_mapping </code> performs the following tasks on the data provided in the bag file:</p>
<ul>
<li><strong>subscribe</strong> to 8 <code>CameraInfo</code> and 8 <code>Image</code> topics</li>
<li><strong>synchronize the subscribers</strong></li>
<li><strong>apply <code>inverse perspective mapping</code></strong> on single images.</li>
<li><strong>stitches</strong>  the result into a BEV image</li>
</ul>
<p>We can now start the launch file with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch camera_based_semantic_grid_mapping_r2 semantic_grid_mapping.launch.py </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>image_view</code> node should show you the semantically segmented images of the right and left forward facing cameras. They are sufficient for testing the node, for now.</p>
<p><img decoding="async" loading="lazy" alt="visualization" src="/Autonomous-Connected-Driving/assets/images/visualization-627bbe5bb21785d925e282df1748a107.png" width="796" height="332" class="img_ev3q"></p>
<p>However, the Bird&#x27;s Eye View (BEV) image is not shown. This is because the node doesn&#x27;t yet subscribe to the correct images and cameras info topics yet.</p>
<p>In the following tasks, you will need to modify code in <strong>&quot;semantic_grid_mapping.py&quot;</strong>. After finishing all tasks, you will have completed the semantic grid mapping node.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3-synchronize-the-subscribers">Task 3: Synchronize the subscribers<a href="#task-3-synchronize-the-subscribers" class="hash-link" aria-label="Direct link to Task 3: Synchronize the subscribers" title="Direct link to Task 3: Synchronize the subscribers">​</a></h3>
<p>As we want to combine images from multiple cameras to produce a BEV image, these images need to be from the same time step.</p>
<p>For the purpose of synchronizing the image topics, we will use <strong><code>message_filters</code></strong>.</p>
<p><code>message_filters</code> is a utility library that provides filtering algorithms for commonly used messages.</p>
<p>The following lines of code in <strong>&quot;semantic_grid_mapping.py&quot;</strong> are responsible for subscribing to the different <code>CameraInfo</code> and <code>Image</code> topics.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NONEXISTENT_CAMERA_IMAGE_TOPIC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NONEXISTENT_CAMERA_INFO_TOPIC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># setup subscribers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># array with all subscribers that should be synchronized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> image_topic</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info_topic </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_topics_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info_topics_in</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### START Task 3 CODE HERE ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># create subscriber for topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PLACE_HOLDER_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_profile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># create a subscriber for camera info topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CameraInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PLACE_HOLDER_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_profile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### END Task 3 CODE HERE ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># add subscribers to array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_sub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">info_sub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># synchronized subscriber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApproximateTimeSynchronizer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> slop</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the above code snippet, we iterate over all <code>Image</code> topics and their corresponding <code>CameraInfo</code>. These are defined in <code>config/params.yaml</code> und loaded in the node&#x27;s function <code>load_parameters()</code>.</p>
<p>Note that we use <code>message_filters.Subscriber()</code> instead of normal ROS subscribers.</p>
<p><code>message_filters</code> provides subscriber policies that allow subscribing to messages from multiple topics and outputting them in a single callback. Here, we will use <code>message_filters.ApproximateTimeSynchronizer()</code>. The policy synchronizes the topics based on their time stamp (given in the header of the messages). It is capable of synchronizing topics even if messages&#x27; time stamps differ from each other. More information can be found in the <a href="https://wiki.ros.org/message_filters" target="_blank" rel="noopener noreferrer">documentation</a>, <a href="https://github.com/ros2/message_filters.git" target="_blank" rel="noopener noreferrer">ROS2 documentation</a>. There also exist an <code>ExactTime Policy.</code> , which is not covered here.</p>
<p><code>message_filters.ApproximateTimeSynchronizer()</code> takes three parameters:</p>
<ul>
<li>an array of subscribers (we save our subscribers in the array <strong>subs</strong>)</li>
<li><strong>queue_size</strong> and  <strong>slop</strong> (we use  <strong>queue_size=5</strong> and  <strong>slop=0.01</strong>)</li>
</ul>
<p>The <code>slop</code> parameter defines the maximum delay (in seconds) with which messages can be synchronized.</p>
<p>Your task is to <strong>replace</strong> <code>PLACE_HOLDER_1</code> and <code>PLACE_HOLDER_2</code> with the correct variables to subscribe to the <code>Image</code>and <code>CameraInfo</code> topics.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># create subscriber for topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PLACE_HOLDER_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_profile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># create a subscriber for camera info topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CameraInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PLACE_HOLDER_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_profile</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After this adjustment, you can <strong>rerun the node</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch camera_based_semantic_grid_mapping_r2 semantic_grid_mapping.launch.py </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A visualization window for the BEV image should appear.
However, the BEV image looks like this:</p>
<p><img decoding="async" loading="lazy" alt="bev wrong" src="data:image/png;base64,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EyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSEC8BIzderU/t4FABAiAC818+bN6+9dAAAhAgAA1BMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgBs1KE5tL93AYAXKSECwEb9PD/v710A4EVKiAAAAOWECAAAUE6IAAAA5YQIAABQTogAAADlhAgAZT4747P9vQsAbCEaXV1d7fnz5/f3fgAAAC8RXV1dRkQAAIB6QgQAACgnRAAAgHJCBAAAKCdEAACAckIEAAAoJ0QAeIrrfABQxXVEAACAUq4jAgAA9AshAgAAlBMiAABAOSECAACUEyIAAEA5IQLAC8ZywABsjOV7AQCAUpbvBQAA+oUQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAFgizB16tT+3gUACgkRALYI8+bN6+9dAKCQEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMo1G41Gf+8DAADwEtJoNPL/AOAfRRXXRWhaAAAAAElFTkSuQmCC" width="802" height="633" class="img_ev3q"></p>
<p>Some parts of the code are still missing!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message">Task 4: Extract the camera intrinsic matrix from the CameraInfo message<a href="#task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message" class="hash-link" aria-label="Direct link to Task 4: Extract the camera intrinsic matrix from the CameraInfo message" title="Direct link to Task 4: Extract the camera intrinsic matrix from the CameraInfo message">​</a></h3>
<p>The goal of this task is to get the intrinsic matrices <code>K</code> of the cameras.</p>
<p>For this purpose, you have to modify the following lines in the function <strong>compute_bev</strong> by <strong>replacing</strong> <code>PLACE_HOLDER_INTRINSIC</code> with your code.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract intrinsic matrix k (3x3) from CameraInfo topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_INTRINSIC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># comment this line in your solution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reshape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_INTRINSIC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># replace the placeholder and use the actual camera intrinsics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hints">hints:<a href="#hints" class="hash-link" aria-label="Direct link to hints:" title="Direct link to hints:">​</a></h5>
<ul>
<li>The <code>CameraInfo</code> message is provided in the variable <code>cam_info_msg</code>.</li>
<li>In the <strong>CameraInfo</strong> message, the intrinsic matrix is named <strong>k</strong>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-5-calculate-the-camera-extrinsic-matrix">Task 5: Calculate the camera extrinsic matrix<a href="#task-5-calculate-the-camera-extrinsic-matrix" class="hash-link" aria-label="Direct link to Task 5: Calculate the camera extrinsic matrix" title="Direct link to Task 5: Calculate the camera extrinsic matrix">​</a></h3>
<p>The goal of this task is to compute extrinsic matrices of the cameras based on information in the <code>CameraInfo</code> messages.</p>
<p>The extrinsic matrix transforms the camera&#x27;s coordinate frame to the vehicle&#x27;s coordinates frame.
For this, we will use ros <a href="https://wiki.ros.org/tf2" target="_blank" rel="noopener noreferrer"><strong>tf2</strong></a>. This library allows to maintain multiple coordinate frames and their relationship over time.</p>
<p><strong>Part 1: Look up the transformation between the vehicle&#x27;s base link and the camera frames</strong></p>
<p>To get the transformation between coordinate frames, you will use the function <a href="http://docs.ros.org/en/noetic/api/tf2_ros/html/c++/classtf2__ros_1_1Buffer.html" target="_blank" rel="noopener noreferrer"><code>tfBuffer.lookup_transform()</code></a> which takes a target frame and a source frame as parameters and returns the transformation between them.
Replace the <code>None</code> placeholders in the function <code>compute_bev()</code> in <strong>&quot;semanctic_grid_mapping.py&quot;</strong>, then uncomment the line to define <code>transform</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># use tfBuffer to look up the transformation from the vehicle&#x27;s base link frame to the camera frame.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># transform = self.tfBuffer.lookup_transform(None, None, None) # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hints-1">Hints:<a href="#hints-1" class="hash-link" aria-label="Direct link to Hints:" title="Direct link to Hints:">​</a></h5>
<ul>
<li>The vehicle&#x27;s base link frame name is saved in <code>self.vehicle_base_link</code>.</li>
<li>The camera frame name can be found in the <code>CameraInfo</code> topic.</li>
<li>Look up the transformation at the common time <code>common_time</code>.</li>
<li>The function <code>lookup_transform()</code> can take four arguments: <code>target_frame</code>, <code>source_frame</code>, <code>time</code> at which the value of the transform is desired, and an optional <code>timeout</code>.</li>
</ul>
<p><strong>Part 2: Convert a Transform into a homogeneous matrix</strong></p>
<p>The function <code>tfBuffer.lookup_transform()</code> returns a transform of the type <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/TransformStamped.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/TransformStamped</code></a>.
The goal of this task is to convert this transform into a (4x4) <strong>homogeneous transformation matrix</strong>, the extrinsic matrix <code>E</code> in our case.</p>
<p><code>geometry_msgs/TransformStamped</code> contains a <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Transform.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/Transform</code></a>, which contains a <strong>quaternion</strong> and a <strong>translation vector</strong>.
<a href="https://en.wikipedia.org/wiki/Quaternion" target="_blank" rel="noopener noreferrer"><strong>Quaternions</strong></a> provide another way to represent rotations.
In this task, we will extract the quaternion from the variable <code>transform</code>. Then, we will convert it to <strong>(roll, pitch, yaw)</strong> angles. At the end, we will convert <strong>(roll, pitch, yaw)</strong> into a rotation matrix.</p>
<p><strong>Uncomment</strong> and <strong>adjust</strong> the following lines to extract a <strong>quaternion</strong> out of the <code>transform</code> and convert it into <code>(roll, pitch, yaw)</code>.</p>
<p>The conversion uses <a href="https://github.com/DLu/tf_transformations/" target="_blank" rel="noopener noreferrer"><code>tf_transformations</code></a>. You can find the correct function for converting quaternions to <code>(roll, pitch, yaw)</code>- also called euler angles - <a href="https://github.com/DLu/tf_transformations/blob/main/tf_transformations/__init__.py" target="_blank" rel="noopener noreferrer"><strong>here</strong></a>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract quaternion from transform and transform it into a list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># quaternion = transform.transform.REPLACE_ME # adjust and uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># quaternion = [REPLACE_ME.x, REPLACE_ME.y , REPLACE_ME.z, REPLACE_ME.w] # adjust and uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># convert quaternion to (roll,pitch,yaw)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># roll, pitch, yaw = REPLACE_ME # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, you can can convert <code>(roll, pitch, yaw)</code> into a rotation matrix.</p>
<p><strong>Replace</strong> the <code>None</code> placeholders with your code.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># compute rotation matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">R </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix (combination of Rx, Ry, Rz)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Refer to the documentation of <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/TransformStamped.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/TransformStamped</code></a> and extract the translation vector by <strong>adjusting</strong> the <code>REPLACE_ME</code> placeholder. Then, uncomment the next to line to save the <code>x</code>, <code>y</code> and <code>z</code> components in a list. Last, convert the list to a NumPy array.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract translation from transform </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = transform.transform.REPLACE_ME # uncomment and adjust</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = [t.x, t.y, t.z]  # uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># convert t to a numpy array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = REPLACE_ME # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Combine</strong> the determined (3x3) rotation matrix <code>R</code> and the (3x1) translation vector <code>t</code> into a (4x4) homogeneous transformation representing the extrinsic matrix <code>E</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># first combine R and t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># E = np.REPLACE_ME([REPLACE_ME, REPLACE_ME]) # uncomment and adjust</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># then add 1 row ([0., 0., 0., 1.]) to complete the transform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># E = np.row_stack([E, REPLACE_ME]) # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, use <code>E</code> and <strong>replace</strong> the placeholder <code>PLACE_HOLDER_EXTRINSIC</code> by commenting the following two lines.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_EXTRINSIC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># comment when done with task 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">E </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PLACE_HOLDER_EXTRINSIC </span><span class="token comment" style="color:#999988;font-style:italic"># comment when done with task 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Rerun the node :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch camera_based_semantic_grid_mapping_r2 semantic_grid_mapping.launch.py </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="result">Result<a href="#result" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h3>
<p>After completing the <code>compute_bev</code> function and restarting the node, you should see the following output.</p>
<p><img decoding="async" loading="lazy" alt="carla bev" src="/Autonomous-Connected-Driving/assets/images/carla_bev-7cbd4b25a82fc071517a7e52d0bb83a8.png" width="797" height="591" class="img_ev3q"></p>
<p>Congratulations!</p>
<p><strong>Optional additional task</strong>: Create an RVIZ configuration and a launch file that starts the semantic grid mapping node and RVIZ with your RVIZ configuration. Display all 8 images from the camera persepctive and the BEV image, if the performance of your computer permits!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wrap-up">Wrap-up<a href="#wrap-up" class="hash-link" aria-label="Direct link to Wrap-up" title="Direct link to Wrap-up">​</a></h3>
<ul>
<li>You learned how to synchronize subscribers.</li>
<li>You learned how <code>CameraInfo</code> messages can be used to extract the camera parameters.</li>
<li>You learned how to perform coordinate transformations using ROS libraries like <code>tf2</code> and <code>tf_conversions</code>.</li>
<li>You have completed a simple Python ROS package for camera-based semantic grid mapping.</li>
<li>Feel free to explore the rest of the code for a deeper understanding of the semantic grid mapping package.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ros1-instructions"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/ROS1-blue" alt="ROS1" class="img_ev3q"> Instructions<a href="#ros1-instructions" class="hash-link" aria-label="Direct link to ros1-instructions" title="Direct link to ros1-instructions">​</a></h2>
<p>In this workshop, we will perform <strong>semantic grid mapping</strong> based on images taken by vehicle-mounted cameras.
The approach will make use of inverse perspective mapping (IPM).</p>
<p>We will use a recording from a simulation containing images from eight cameras.</p>
<p>The learning goals of this workshop are ...</p>
<ul>
<li>Inspecting a rosbag which contains camera data</li>
<li>Learn about the ROS message format for camera images and camera infos</li>
<li>Learn about synchronized subscribers</li>
<li>Learn how to use the tf2 library</li>
<li>Learn how to visualize the output of semantic grid mapping</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-this-workshop-1">Introduction to this workshop<a href="#introduction-to-this-workshop-1" class="hash-link" aria-label="Direct link to Introduction to this workshop" title="Direct link to Introduction to this workshop">​</a></h3>
<p>We prepared a rosbag with camera data for you to use.</p>
<p>Download the file <code>semantic_8_cams.bag</code> from <a href="https://rwth-aachen.sciebo.de/s/bHan8XNDB9ijlCz" target="_blank" rel="noopener noreferrer"><strong>here (683.6 MB)</strong></a>.</p>
<p>Save this file to your local directory <code>${REPOSITORY}/bag</code>. This directory will be mounted into the docker container to the path <code>/home/rosuser/ws/bag</code>.</p>
<p>After the download, navigate to the local directory <code>${REPOSITORY}/docker</code> on your host and execute <code>./ros1_run.sh</code> to start the ACDC docker container.</p>
<p>Inside the container, you can navigate to <code>/home/rosuser/ws/bag</code> and execute <code>rosbag info semantic_8_cams.bag</code> to inspect the rosbag:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path:        semantic_8_cams.bag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version:     2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration:    7.5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start:       Jan 01 1970 01:00:26.59 (26.59)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end:         Jan 01 1970 01:00:34.04 (34.04)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">size:        683.6 MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages:    4622</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compression: none [718/718 chunks]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">types:       rosgraph_msgs/Clock    [a9c97c1d230cfc112e270351a944ee47]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             rosgraph_msgs/Log      [acffd30cd6b6de30f120938c17c593fb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             sensor_msgs/CameraInfo [c9a58c1b0b154e0e6da7578cb991d214]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             sensor_msgs/Image      [060021388200f6f0f447d0fcd9c64743]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             tf2_msgs/TFMessage     [94810edda583a504dfda3829e70d7eec]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">topics:      /carla/ego_vehicle/rgb_view/camera_info                               149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/rgb_view/image                                     149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_left_1/camera_info      149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_left_1/image            149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_left_2/camera_info      149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_left_2/image            149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_right_1/camera_info     149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_right_1/image           149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_right_2/camera_info     149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_back_right_2/image           149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_left_1/camera_info     149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_left_1/image           149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_left_2/camera_info     149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_left_2/image           149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_right_1/camera_info    149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_right_1/image          149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_right_2/camera_info    149 msgs    : sensor_msgs/CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /carla/ego_vehicle/semantic_segmentation_front_right_2/image          149 msgs    : sensor_msgs/Image     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /clock                                                                150 msgs    : rosgraph_msgs/Clock   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /rosout                                                                 2 msgs    : rosgraph_msgs/Log     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /tf                                                                  1788 msgs    : tf2_msgs/TFMessage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can see that the rosbag has a duration of 7.5 seconds and contains segmented images of type <code>sensor_msgs/Image</code> and corresponding <code>sensor_msgs/CameraInfo</code> messages.
We will use these camera images in this assignment in order to apply semantic grid mapping.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ros-sensor_msgsimage-message">ROS <code>sensor_msgs/Image</code> Message<a href="#ros-sensor_msgsimage-message" class="hash-link" aria-label="Direct link to ros-sensor_msgsimage-message" title="Direct link to ros-sensor_msgsimage-message">​</a></h4>
<p>The message definition <a href="https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/Image.html" target="_blank" rel="noopener noreferrer">sensor_msgs/Image</a> is ROS&#x27; image message format. This message type provides a way to send images <code>sensor_msgs/Image</code> that can be used seamlessly with many different ROS visualization and image processing tools. Please read the documentation about the <a href="https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/Image.html" target="_blank" rel="noopener noreferrer">detailed message format</a> and its content.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ros-sensor_msgscamerainfo">ROS <code>sensor_msgs/CameraInfo</code><a href="#ros-sensor_msgscamerainfo" class="hash-link" aria-label="Direct link to ros-sensor_msgscamerainfo" title="Direct link to ros-sensor_msgscamerainfo">​</a></h4>
<p>The message definition <a href="https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/CameraInfo.html" target="_blank" rel="noopener noreferrer">sensor_msgs/CameraInfo</a> is ROS&#x27; standard camera info message format. It is sent together with <code>sensor_msgs/Image</code> or <code>sensor_msgs/CompressedImage</code> to provide additional information about the current camera image such as <strong>camera calibration parameters</strong>. Please read the documentation about the <a href="https://docs.ros.org/en/melodic/api/sensor_msgs/html/msg/CameraInfo.html" target="_blank" rel="noopener noreferrer">detailed message format</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package-1">Task 1: Explore the semantic grid mapping package and build and source the package<a href="#task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package-1" class="hash-link" aria-label="Direct link to Task 1: Explore the semantic grid mapping package and build and source the package" title="Direct link to Task 1: Explore the semantic grid mapping package and build and source the package">​</a></h3>
<p>The code for the camera-based semantic grid mapping node can be found in the directory <code>workshops/section_2/camera_based_semantic_grid_mapping</code>.</p>
<p>The main source code is located in the directory <code>src</code>. The launch file and parameters are located in directory <code>launch</code>. Feel free to read all the code, parameters and launch files.</p>
<p>Now, in the container, navigate to <code>catkin_workspace</code> and build the package with with <code>catkin build</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">catkin build camera_based_semantic_grid_mapping</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and source the workspace</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source devel/setup.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Perfect! Now you will be able to perform semantic grid mapping using camera images with this package. Let&#x27;s go to the next task.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node-1">Task 2: Replay rosbag and run the camera-based grid mapping node<a href="#task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node-1" class="hash-link" aria-label="Direct link to Task 2: Replay rosbag and run the camera-based grid mapping node" title="Direct link to Task 2: Replay rosbag and run the camera-based grid mapping node">​</a></h3>
<p>We have already prepared a launch file for you to execute the camera-based semantic grid mapping package. Please read through the following lines of code carefully.</p>
<p>Contents of the file <code>start_all.launch</code>:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">launch</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/use_sim_time</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ROSBAG PLAY --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">node</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pkg</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">rosbag</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">play</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">player</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">output</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">screen</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">args</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">--rate 0.1 -l --clock $/home/rosuser/ws/bag/semantic_8_cams.bag</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">node</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--- Semantic Grid Mapping Node --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">rosparam</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">command</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">load</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">$(find camera_based_semantic_grid_mapping)/launch/params.yaml</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">node</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">camera_based_semantic_grid_mapping</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">pkg</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">camera_based_semantic_grid_mapping</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">semantic_grid_mapping.py</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">output</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">screen</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">node</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--- NODES FOR VISUALIZATION --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">node</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pkg</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">front_left_segmented_image</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">args</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image:=/carla/ego_vehicle/semantic_segmentation_front_left_1/image</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">node</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--- NODES FOR VISUALIZATION --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">node</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pkg</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">front_right_segmented_image</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">args</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image:=/carla/ego_vehicle/semantic_segmentation_front_right_1/image</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">node</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">node</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pkg</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image_view</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">segmentation_viewer</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">args</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image:=/BEV_image</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">node</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">launch</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Hence, we perform the following tasks:</p>
<ul>
<li>
<p><strong>Replay the rosbag</strong> with a speed of 0.1. Note, that we set the speed to a very low value here, because your computer might be very slow. You can increase this value if your computer is fast enough to compute the semantic grid map at a higher speed. If necessary, you may also reduce the value.</p>
</li>
<li>
<p><strong>Load the parameters</strong> that are necessary for the <code>camera_based_semantic_grid_mapping</code> node (camera image and info topic names, output image size etc.)</p>
</li>
<li>
<p><strong>Start the <code>camera_based_semantic_grid_mapping </code> Node</strong></p>
</li>
<li>
<p><strong>Start a visualization node</strong> to show the result</p>
</li>
</ul>
<p>The node <code>camera_based_semantic_grid_mapping </code> performs the following tasks on the data provided in the bag file:</p>
<ul>
<li><strong>subscribe</strong> to 8 <code>CameraInfo</code> and 8 <code>Image</code> topics</li>
<li><strong>synchronize the subscribers</strong></li>
<li><strong>apply <code>inverse perspective mapping</code></strong> on single images.</li>
<li><strong>stitches</strong>  the result into a BEV image</li>
</ul>
<p>We can now start the launch file with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch camera_based_semantic_grid_mapping start_all.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>image_view</code> node should show you the semantically segmented images of the right and left forward facing cameras. They are sufficient for testing the node, for now.</p>
<p><img decoding="async" loading="lazy" alt="visualization" src="/Autonomous-Connected-Driving/assets/images/visualization-627bbe5bb21785d925e282df1748a107.png" width="796" height="332" class="img_ev3q"></p>
<p>However, the Bird&#x27;s Eye View (BEV) image is not shown. This is because the node doesn&#x27;t yet subscribe to the correct images and cameras info topics yet.</p>
<p>In the following tasks, you will need to modify code in <strong>&quot;semantic_grid_mapping.py&quot;</strong>. After finishing all tasks, you will have completed the semantic grid mapping node.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3-synchronize-the-subscribers-1">Task 3: Synchronize the subscribers<a href="#task-3-synchronize-the-subscribers-1" class="hash-link" aria-label="Direct link to Task 3: Synchronize the subscribers" title="Direct link to Task 3: Synchronize the subscribers">​</a></h3>
<p>As we want to combine images from multiple cameras to produce a BEV image, these images need to be from the same time step.</p>
<p>For the purpose of synchronizing the image topics, we will use <strong><code>message_filters</code></strong>.</p>
<p><code>message_filters</code> is a utility library that provides filtering algorithms for commonly used messages.</p>
<p>The following lines of code in <strong>&quot;semantic_grid_mapping.py&quot;</strong> are responsible for subscribing to the different <code>CameraInfo</code> and <code>Image</code> topics.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NONEXISTENT_CAMERA_IMAGE_TOPIC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NONEXISTENT_CAMERA_INFO_TOPIC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># setup subscribers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># array with all subscribers that should be synchronized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> image_topic</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info_topic </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_topics_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info_topics_in</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### START Task 3 CODE HERE ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># create subscriber for topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># create a subscriber for camera info topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CameraInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### END Task 3 CODE HERE ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># add subscribers to array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_sub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">info_sub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># synchronized subscriber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApproximateTimeSynchronizer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> slop</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the above code snippet, we iterate over all <code>Image</code> topics and their corresponding <code>CameraInfo</code>. These are defined in <code>launch/params.yaml</code> und loaded in the node&#x27;s function <code>load_parameters()</code>.</p>
<p>Note that we use <code>message_filters.Subscriber()</code> instead of normal ROS subscribers.</p>
<p><code>message_filters</code> provides subscriber policies that allow subscribing to messages from multiple topics and outputting them in a single callback. Here, we will use <code>message_filters.ApproximateTimeSynchronizer()</code>. The policy synchronizes the topics based on their time stamp (given in the header of the messages). It is capable of synchronizing topics even if messages&#x27; time stamps differ from each other. More information can be found in the <a href="https://wiki.ros.org/message_filters" target="_blank" rel="noopener noreferrer">documentation</a>. There also exist an <code>ExactTime Policy.</code> , which is not covered here.</p>
<p><code>message_filters.ApproximateTimeSynchronizer()</code> takes three parameters:</p>
<ul>
<li>an array of subscribers (we save our subscribers in the array <strong>subs</strong>)</li>
<li><strong>queue_size</strong> and  <strong>slop</strong> (we use  <strong>queue_size=5</strong> and  <strong>slop=0.01</strong>)</li>
</ul>
<p>The <code>slop</code> parameter defines the maximum delay (in seconds) with which messages can be synchronized.</p>
<p>Your task is to <strong>replace</strong> <code>PLACE_HOLDER_1</code> and <code>PLACE_HOLDER_2</code> with the correct variables to subscribe to the <code>Image</code>and <code>CameraInfo</code> topics.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># create subscriber for topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># create a subscriber for camera info topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message_filters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subscriber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CameraInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After this adjustment, you can <strong>rerun the node</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch camera_based_semantic_grid_mapping start_all.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A visualization window for the BEV image should appear.
However, the BEV image looks like this:</p>
<p><img decoding="async" loading="lazy" alt="bev wrong ros2" src="data:image/png;base64,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EyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSEC8BIzderU/t4FABAiAC818+bN6+9dAAAhAgAA1BMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgAAQDkhAgAAlBMiAABAOSECAACUEyIAAEA5IQIAAJQTIgBs1KE5tL93AYAXKSECwEb9PD/v710A4EVKiAAAAOWECAAAUE6IAAAA5YQIAABQTogAAADlhAgAZT4747P9vQsAbCEaXV1d7fnz5/f3fgAAAC8RXV1dRkQAAIB6QgQAACgnRAAAgHJCBAAAKCdEAACAckIEAAAoJ0QAeIrrfABQxXVEAACAUq4jAgAA9AshAgAAlBMiAABAOSECAACUEyIAAEA5IQLAC8ZywABsjOV7AQCAUpbvBQAA+oUQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAFgizB16tT+3gUACgkRALYI8+bN6+9dAKCQEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMoJEQAAoJwQAQAAygkRAACgnBABAADKCREAAKCcEAEAAMo1G41Gf+8DAADwEtJoNPL/AOAfRRXXRWhaAAAAAElFTkSuQmCC" width="802" height="633" class="img_ev3q"></p>
<p>Some parts of the code are still missing!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message-1">Task 4: Extract the camera intrinsic matrix from the CameraInfo message<a href="#task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message-1" class="hash-link" aria-label="Direct link to Task 4: Extract the camera intrinsic matrix from the CameraInfo message" title="Direct link to Task 4: Extract the camera intrinsic matrix from the CameraInfo message">​</a></h3>
<p>The goal of this task is to get the intrinsic matrices <code>K</code> of the cameras.</p>
<p>For this purpose, you have to modify the following lines in the function <strong>compute_bev</strong> by <strong>replacing</strong> <code>PLACE_HOLDER_INTRINSIC</code> with your code.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract intrinsic matrix K (3x3) from CameraInfo topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_INTRINSIC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># comment this line in your solution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reshape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PLACE_HOLDER_INTRINSIC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># replace the placeholder and use the actual camera intrinsics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hints-2">hints:<a href="#hints-2" class="hash-link" aria-label="Direct link to hints:" title="Direct link to hints:">​</a></h5>
<ul>
<li>The <code>CameraInfo</code> message is provided in the variable <code>cam_info_msg</code>.</li>
<li>In the <strong>CameraInfo</strong> message, the intrinsic matrix is named <strong>K</strong>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-5-calculate-the-camera-extrinsic-matrix-1">Task 5: Calculate the camera extrinsic matrix<a href="#task-5-calculate-the-camera-extrinsic-matrix-1" class="hash-link" aria-label="Direct link to Task 5: Calculate the camera extrinsic matrix" title="Direct link to Task 5: Calculate the camera extrinsic matrix">​</a></h3>
<p>The goal of this task is to compute extrinsic matrices of the cameras based on information in the <code>CameraInfo</code> messages.</p>
<p>The extrinsic matrix transforms the camera&#x27;s coordinate frame to the vehicle&#x27;s coordinates frame.
For this, we will use ros <a href="https://wiki.ros.org/tf2" target="_blank" rel="noopener noreferrer"><strong>tf2</strong></a>. This library allows to maintain multiple coordinate frames and their relationship over time.</p>
<p><strong>Part 1: Look up the transformation between the vehicle&#x27;s base link and the camera frames</strong></p>
<p>To get the transformation between coordinate frames, you will use the function <a href="http://docs.ros.org/en/noetic/api/tf2_ros/html/c++/classtf2__ros_1_1Buffer.html" target="_blank" rel="noopener noreferrer"><code>tfBuffer.lookup_transform()</code></a> which takes a target frame and a source frame as parameters and returns the transformation between them.
Replace the <code>None</code> placeholders in the function <code>compute_bev()</code> in <strong>&quot;semanctic_grid_mapping.py&quot;</strong>, then uncomment the line to define <code>transform</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># use tfBuffer to look up the transformation from the vehicle&#x27;s base link frame to the camera frame.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># transform = self.tfBuffer.lookup_transform(None, None, None) # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hints-3">Hints:<a href="#hints-3" class="hash-link" aria-label="Direct link to Hints:" title="Direct link to Hints:">​</a></h5>
<ul>
<li>The vehicle&#x27;s base link frame name is saved in <code>self.vehicle_base_link</code>.</li>
<li>The camera frame name can be found in the <code>CameraInfo</code> topic.</li>
<li>Look up the transformation at the common time <code>common_time</code>.</li>
<li>The function <code>lookup_transform()</code> can take four arguments: <code>target_frame</code>, <code>source_frame</code>, <code>time</code> at which the value of the transform is desired, and an optional <code>timeout</code>.</li>
</ul>
<p><strong>Part 2: Convert a Transform into a homogeneous matrix</strong></p>
<p>The function <code>tfBuffer.lookup_transform()</code> returns a transform of the type <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/TransformStamped.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/TransformStamped</code></a>.
The goal of this task is to convert this transform into a (4x4) <strong>homogeneous transformation matrix</strong>, the extrinsic matrix <code>E</code> in our case.</p>
<p><code>geometry_msgs/TransformStamped</code> contains a <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Transform.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/Transform</code></a>, which contains a <strong>quaternion</strong> and a <strong>translation vector</strong>.
<a href="https://en.wikipedia.org/wiki/Quaternion" target="_blank" rel="noopener noreferrer"><strong>Quaternions</strong></a> provide another way to represent rotations.
In this task, we will extract the quaternion from the variable <code>transform</code>. Then, we will convert it to <strong>(roll, pitch, yaw)</strong> angles. At the end, we will convert <strong>(roll, pitch, yaw)</strong> into a rotation matrix.</p>
<p><strong>Uncomment</strong> and <strong>adjust</strong> the following lines to extract a <strong>quaternion</strong> out of the <code>transform</code> and convert it into <code>(roll, pitch, yaw)</code>.</p>
<p>The conversion uses <a href="https://wiki.ros.org/tf_conversions" target="_blank" rel="noopener noreferrer"><code>tf_conversions</code></a>. You can find the correct function for converting quaternions to <code>(roll, pitch, yaw)</code>- also called euler angles - <a href="https://github.com/ros/geometry/blob/noetic-devel/tf/src/tf/transformations.py" target="_blank" rel="noopener noreferrer"><strong>here</strong></a>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract quaternion from transform and transform it into a list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># quaternion = transform.transform.REPLACE_ME # adjust and uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># quaternion = [REPLACE_ME.x, REPLACE_ME.y , REPLACE_ME.z, REPLACE_ME.w] # adjust and uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># convert quaternion to (roll,pitch,yaw)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># roll, pitch, yaw = REPLACE_ME # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, you can can convert <code>(roll, pitch, yaw)</code> into a rotation matrix.</p>
<p><strong>Replace</strong> the <code>None</code> placeholders with your code.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># compute rotation matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">R </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with actual matrix (combination of Rx, Ry, Rz)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Refer to the documentation of <a href="http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/TransformStamped.html" target="_blank" rel="noopener noreferrer"><code>geometry_msgs/TransformStamped</code></a> and extract the translation vector by <strong>adjusting</strong> the <code>REPLACE_ME</code> placeholder. Then, uncomment the next to line to save the <code>x</code>, <code>y</code> and <code>z</code> components in a list. Last, convert the list to a NumPy array.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extract translation from transform </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = transform.transform.REPLACE_ME # uncomment and adjust</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = [t.x, t.y, t.z]  # uncomment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># convert t to a numpy array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># t = REPLACE_ME # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Combine</strong> the determined (3x3) rotation matrix <code>R</code> and the (3x1) translation vector <code>t</code> into a (4x4) homogeneous transformation representing the extrinsic matrix <code>E</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># first combine R and t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># E = np.REPLACE_ME([REPLACE_ME, REPLACE_ME]) # uncomment and adjust</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># then add 1 row ([0., 0., 0., 1.]) to complete the transform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># E = np.row_stack([E, REPLACE_ME]) # uncomment and adjust</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, use <code>E</code> and <strong>replace</strong> the placeholder <code>PLACE_HOLDER_EXTRINSIC</code> by commenting the following two lines.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PLACE_HOLDER_EXTRINSIC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># comment when done with task 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">E </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PLACE_HOLDER_EXTRINSIC </span><span class="token comment" style="color:#999988;font-style:italic"># comment when done with task 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Rerun the node :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch camera_based_semantic_grid_mapping start_all.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="result-1">Result<a href="#result-1" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h3>
<p>After completing the <code>compute_bev</code> function and restarting the node, you should see the following output.</p>
<p><img decoding="async" loading="lazy" alt="carla bev ros2" src="/Autonomous-Connected-Driving/assets/images/carla_bev-7cbd4b25a82fc071517a7e52d0bb83a8.png" width="797" height="591" class="img_ev3q"></p>
<p><strong>Optional additional task</strong>: Create an RVIZ configuration and a launch file that starts the semantic grid mapping node and RVIZ with your RVIZ configuration. Display all 8 images from the camera persepctive and the BEV image, if the porformance of your computer permits!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wrap-up-1">Wrap-up<a href="#wrap-up-1" class="hash-link" aria-label="Direct link to Wrap-up" title="Direct link to Wrap-up">​</a></h3>
<ul>
<li>You learned how to synchronize subscribers.</li>
<li>You learned how <code>CameraInfo</code> messages can be used to extract the camera parameters.</li>
<li>You learned how to perform coordinate transformations using ROS libraries like <code>tf2</code> and <code>tf_conversions</code>.</li>
<li>You have completed a simple Python ROS package for camera-based semantic grid mapping.</li>
<li>Feel free to explore the rest of the code for a deeper understanding of the semantic grid mapping package.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/task/02_sensor_data_processing/01_Camera-based-Semantic-Grid-Mapping.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Autonomous-Connected-Driving/docs/category/sensor-data-processing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sensor Data Processing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Autonomous-Connected-Driving/docs/task/sensor_data_processing/Deep-OGM"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deep Learning-based Point Cloud Occupancy Grid Mapping</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ros2--instructions" class="table-of-contents__link toc-highlight">ROS2  Instructions</a><ul><li><a href="#introduction-to-this-workshop" class="table-of-contents__link toc-highlight">Introduction to this workshop</a></li><li><a href="#ros2s-sensor_msgsmsgimage-message" class="table-of-contents__link toc-highlight">ROS2&#39;s <code>sensor_msgs/msg/Image</code> Message</a></li><li><a href="#ros2s-sensor_msgsmsgcamerainfo-message" class="table-of-contents__link toc-highlight">ROS2&#39;s <code>sensor_msgs/msg/CameraInfo</code> Message</a></li><li><a href="#task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package" class="table-of-contents__link toc-highlight">Task 1: Explore the semantic grid mapping package and build and source the package</a></li><li><a href="#task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node" class="table-of-contents__link toc-highlight">Task 2: Replay rosbag and run the camera-based grid mapping node</a></li><li><a href="#task-3-synchronize-the-subscribers" class="table-of-contents__link toc-highlight">Task 3: Synchronize the subscribers</a></li><li><a href="#task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message" class="table-of-contents__link toc-highlight">Task 4: Extract the camera intrinsic matrix from the CameraInfo message</a></li><li><a href="#task-5-calculate-the-camera-extrinsic-matrix" class="table-of-contents__link toc-highlight">Task 5: Calculate the camera extrinsic matrix</a></li><li><a href="#result" class="table-of-contents__link toc-highlight">Result</a></li><li><a href="#wrap-up" class="table-of-contents__link toc-highlight">Wrap-up</a></li></ul></li><li><a href="#ros1-instructions" class="table-of-contents__link toc-highlight">ROS1 Instructions</a><ul><li><a href="#introduction-to-this-workshop-1" class="table-of-contents__link toc-highlight">Introduction to this workshop</a></li><li><a href="#task-1-explore-the-semantic-grid-mapping-package-and-build-and-source-the-package-1" class="table-of-contents__link toc-highlight">Task 1: Explore the semantic grid mapping package and build and source the package</a></li><li><a href="#task-2-replay-rosbag-and-run-the-camera-based-grid-mapping-node-1" class="table-of-contents__link toc-highlight">Task 2: Replay rosbag and run the camera-based grid mapping node</a></li><li><a href="#task-3-synchronize-the-subscribers-1" class="table-of-contents__link toc-highlight">Task 3: Synchronize the subscribers</a></li><li><a href="#task-4-extract-the-camera-intrinsic-matrix-from-the-camerainfo-message-1" class="table-of-contents__link toc-highlight">Task 4: Extract the camera intrinsic matrix from the CameraInfo message</a></li><li><a href="#task-5-calculate-the-camera-extrinsic-matrix-1" class="table-of-contents__link toc-highlight">Task 5: Calculate the camera extrinsic matrix</a></li><li><a href="#result-1" class="table-of-contents__link toc-highlight">Result</a></li><li><a href="#wrap-up-1" class="table-of-contents__link toc-highlight">Wrap-up</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a></li></ul></div><div class="col footer__col"><div class="footer__title">Robot Operating System</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Autonomous-Connected-Driving" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 - Automated and Connected Driving.</div></div></div></footer></div>
</body>
</html>