<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-task/object_fusion_tracking/Object-Prediction" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Object Prediction | Automated and Connected Driving</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cagricatik.github.io/Autonomous-Connected-Driving/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Object Prediction | Automated and Connected Driving"><meta data-rh="true" name="description" content="ROS1"><meta data-rh="true" property="og:description" content="ROS1"><link data-rh="true" rel="icon" href="/Autonomous-Connected-Driving/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction" hreflang="en"><link data-rh="true" rel="alternate" href="https://cagricatik.github.io/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Autonomous-Connected-Driving/blog/rss.xml" title="Automated and Connected Driving RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Autonomous-Connected-Driving/blog/atom.xml" title="Automated and Connected Driving Atom Feed"><link rel="stylesheet" href="/Autonomous-Connected-Driving/assets/css/styles.ce2d5abf.css">
<script src="/Autonomous-Connected-Driving/assets/js/runtime~main.effd47cc.js" defer="defer"></script>
<script src="/Autonomous-Connected-Driving/assets/js/main.62095f23.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Autonomous-Connected-Driving/"><div class="navbar__logo"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Autonomous-Connected-Driving/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/introduction-tools/getting_started">Introduction &amp; Tools</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/sensor-data-processing/getting_started">Sensor Data Processing</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/object-fusion-tracking/getting_started">Object Fusion and Tracking</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/vehicle-guidance/getting_started">Vehicle Guidance</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/theory/connected-driving/getting_started">Connected Driving</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Autonomous-Connected-Driving/docs/task/getting_started">Tasks</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a><a class="navbar__item navbar__link" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Autonomous-Connected-Driving/docs/task/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/introduction--tools">Introduction &amp; Tools</a><button aria-label="Expand sidebar category &#x27;Introduction &amp; Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/sensor-data-processing">Sensor Data Processing</a><button aria-label="Expand sidebar category &#x27;Sensor Data Processing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Autonomous-Connected-Driving/docs/category/object-fusion-tracking">Object Fusion Tracking</a><button aria-label="Collapse sidebar category &#x27;Object Fusion Tracking&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction">Object Prediction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Association">Object Association</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Fusion">Object Fusion</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/vehicle-guidance">Vehicle Guidance</a><button aria-label="Expand sidebar category &#x27;Vehicle Guidance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Autonomous-Connected-Driving/docs/category/connected-driving">Connected Driving</a><button aria-label="Expand sidebar category &#x27;Connected Driving&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Autonomous-Connected-Driving/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Autonomous-Connected-Driving/docs/category/object-fusion-tracking"><span itemprop="name">Object Fusion Tracking</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Object Prediction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Object Prediction</h1></header>
<p><img decoding="async" loading="lazy" src="https://img.shields.io/badge/ROS1-blue" alt="ROS1" class="img_ev3q"></p>
<p>In this session, you will be guided through the process of programming a <strong>Multi-Instance Kalman Filter</strong> within a <strong>ROS</strong> node. This comprehensive workshop is designed to equip you with both foundational and advanced skills in object prediction, association, and fusion using ROS1.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives">​</a></h2>
<p>By the end of this workshop, you will:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implement-core-tracking-components">Implement Core Tracking Components<a href="#implement-core-tracking-components" class="hash-link" aria-label="Direct link to Implement Core Tracking Components" title="Direct link to Implement Core Tracking Components">​</a></h3>
<ul>
<li><strong>Object Prediction:</strong> Forecast the future states of detected objects based on their current states.</li>
<li><strong>Object Association:</strong> Match detected objects across different sensor frames to maintain consistent tracking.</li>
<li><strong>Object Fusion:</strong> Combine information from multiple sensors to improve tracking accuracy.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gain-practical-skills">Gain Practical Skills<a href="#gain-practical-skills" class="hash-link" aria-label="Direct link to Gain Practical Skills" title="Direct link to Gain Practical Skills">​</a></h3>
<ul>
<li><strong>Inspect and Visualize Data:</strong> Learn to work with rosbag files containing object data.</li>
<li><strong>Utilize the Eigen Library:</strong> Perform efficient matrix and vector computations.</li>
<li><strong>Leverage Advanced RViz Features:</strong> Enhance your visualization capabilities for better data analysis.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-the-workshop">Introduction to the Workshop<a href="#introduction-to-the-workshop" class="hash-link" aria-label="Direct link to Introduction to the Workshop" title="Direct link to Introduction to the Workshop">​</a></h2>
<p>In this workshop, we utilize simulated data from a vehicle equipped with both a camera and a radar. These sensors provide complementary data:</p>
<ul>
<li><strong>Camera:</strong> Offers high accuracy in the lateral (side-to-side) direction but exhibits higher uncertainty in the longitudinal (front-to-back) direction.</li>
<li><strong>Radar:</strong> Contrarily, provides precise longitudinal measurements but less accurate lateral data.</li>
</ul>
<p>The simulated environment is based on the <strong>ika test track</strong>, ensuring realistic scenarios for object detection and tracking.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-the-rosbag-file">Downloading the Rosbag File<a href="#downloading-the-rosbag-file" class="hash-link" aria-label="Direct link to Downloading the Rosbag File" title="Direct link to Downloading the Rosbag File">​</a></h3>
<p>To begin, download the required rosbag file from the following link:</p>
<p><strong><a href="https://rwth-aachen.sciebo.de/s/F2M2P4G63aaRryB" target="_blank" rel="noopener noreferrer">Download Rosbag</a></strong></p>
<p><strong>Instructions:</strong></p>
<ol>
<li>Save the downloaded file to the local directory <code>acdc/bag</code> on your host machine.</li>
<li>Start Docker by navigating to the <code>acdc/docker</code> directory and executing the startup script:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd acdc/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./ros1_run.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Inspect the contents of the rosbag using the <code>rosbag info</code> command:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rosuser@docker:~/ws/bag$ rosbag info acdc_fusion_guidance_noise.bag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path:        acdc_fusion_guidance_noise.bag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version:     2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration:    9:59s (599s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start:       Jan 01 1970 01:00:02.51 (2.51)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end:         Jan 01 1970 01:10:02.50 (602.50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">size:        77.4 MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages:    125992</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compression: none [102/102 chunks]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">types:       definitions/IkaEgoMotion  [e0618c9f9aa211f416eed80f5aa9a953]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             definitions/IkaGPS        [be18f6276d518be76f37af636e04fd9f]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             definitions/IkaObjectList [a997953d24fa0f3e837de98bfab1882a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">topics:      /ikaGPS                               59993 msgs    : definitions/IkaGPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /sensors/camera_front/ikaObjectList   12000 msgs    : definitions/IkaObjectList</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /sensors/radar_front/ikaObjectList    12000 msgs    : definitions/IkaObjectList</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /sensors/reference/ikaObjectList      12000 msgs    : definitions/IkaObjectList</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             /sensors/vehicleCAN/ikaEgoMotion      29999 msgs    : definitions/IkaEgoMotion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-rosbag-contents">Understanding the Rosbag Contents<a href="#understanding-the-rosbag-contents" class="hash-link" aria-label="Direct link to Understanding the Rosbag Contents" title="Direct link to Understanding the Rosbag Contents">​</a></h3>
<p>The rosbag file includes the following key topics:</p>
<ul>
<li>
<p><strong>Object Detection Topics:</strong></p>
<ul>
<li><code>/sensors/camera_front/ikaObjectList</code></li>
<li><code>/sensors/radar_front/ikaObjectList</code></li>
</ul>
<p>These topics publish lists of detected objects from the front camera and radar sensors, respectively. For more details on the <code>ikaObjectList</code> message type, refer to <a href="https://github.com/ika-rwth-aachen/acdc/wiki/Section-2-Object-Detection" target="_blank" rel="noopener noreferrer">Section 2: Object Detection</a>.</p>
</li>
<li>
<p><strong>Vehicle State Topics:</strong></p>
<ul>
<li><code>/ikaGPS</code></li>
<li><code>/sensors/vehicleCAN/ikaEgoMotion</code></li>
</ul>
<p>These topics provide the positional data of the ego vehicle, essential for accurate object tracking and fusion.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="visualizing-object-detections">Visualizing Object Detections<a href="#visualizing-object-detections" class="hash-link" aria-label="Direct link to Visualizing Object Detections" title="Direct link to Visualizing Object Detections">​</a></h2>
<p>Visualization is crucial for understanding how object detections and tracking behave over time. This section guides you through setting up and visualizing the object detections using RViz.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-workspace">Building the Workspace<a href="#building-the-workspace" class="hash-link" aria-label="Direct link to Building the Workspace" title="Direct link to Building the Workspace">​</a></h3>
<p>Within the Docker container, execute the following commands to build the workspace and set up the environment:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">catkin build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source devel/setup.bash  # Ensure this is run in each new terminal session</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="launching-visualization-and-playback">Launching Visualization and Playback<a href="#launching-visualization-and-playback" class="hash-link" aria-label="Direct link to Launching Visualization and Playback" title="Direct link to Launching Visualization and Playback">​</a></h3>
<p>Open multiple terminals and execute the following commands to launch RViz and play back the rosbag:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Terminal 1: Launch the preconfigured RViz window</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch acdc_launchpack bag_playback.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Terminal 2: Play the rosbag file in a loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expected-visualization">Expected Visualization<a href="#expected-visualization" class="hash-link" aria-label="Direct link to Expected Visualization" title="Direct link to Expected Visualization">​</a></h3>
<p>Upon successful execution, RViz will display the simulated environment with detected objects visualized in real-time. The visualization should resemble the following output:</p>
<p><img decoding="async" loading="lazy" alt="detections_rviz" src="/Autonomous-Connected-Driving/assets/images/detections_rviz-09306bbe5aae7514290144b3a1241094.gif" width="516" height="584" class="img_ev3q"></p>
<p><em>Note: Ensure that the Docker container is running and the rosbag is correctly placed in the specified directory.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-the-eigen-library">Introduction to the Eigen Library<a href="#introduction-to-the-eigen-library" class="hash-link" aria-label="Direct link to Introduction to the Eigen Library" title="Direct link to Introduction to the Eigen Library">​</a></h2>
<p><a href="https://eigen.tuxfamily.org/dox/GettingStarted.html" target="_blank" rel="noopener noreferrer">Eigen</a> is a high-performance C++ library for linear algebra, including matrices, vectors, and related algorithms. It is widely used in robotics and computer vision for efficient mathematical computations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-usage-examples">Basic Usage Examples<a href="#basic-usage-examples" class="hash-link" aria-label="Direct link to Basic Usage Examples" title="Direct link to Basic Usage Examples">​</a></h3>
<p>Here are some fundamental operations using the Eigen library:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Eigen/Dense&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create a copy of an existing matrix of floating-point numbers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">MatrixXf myNewMatrix1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> myExistingMatrixOfEqualDimensions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create a 3x3 matrix of zeros</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">MatrixXf myNewMatrix2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">MatrixXf</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Zero</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Edit a specific matrix entry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">myNewMatrix2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.678</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Multiply, add, and subtract matrices or vectors (dimensions must align)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> B </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> C </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create a vector of floating-point numbers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">VectorXf myNewVector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> someMatrix </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> someVector</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Transpose or invert matrices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">transpose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inverse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exploring-eigen-further">Exploring Eigen Further<a href="#exploring-eigen-further" class="hash-link" aria-label="Direct link to Exploring Eigen Further" title="Direct link to Exploring Eigen Further">​</a></h3>
<p>To delve deeper into Eigen&#x27;s capabilities, you can:</p>
<ul>
<li><strong>Search for Specific Operations:</strong> Use search terms like &quot;Eigen identity matrix&quot; to find relevant functions and examples.</li>
<li><strong>Refer to Documentation:</strong> Utilize the <a href="https://eigen.tuxfamily.org/dox/" target="_blank" rel="noopener noreferrer">Eigen Documentation</a> for comprehensive guides and references.</li>
<li><strong>Utilize IDE Features:</strong> Use <kbd>Ctrl</kbd>+<kbd>F</kbd> to quickly navigate through the documentation or your codebase.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-the-fusion-code">Introduction to the Fusion Code<a href="#introduction-to-the-fusion-code" class="hash-link" aria-label="Direct link to Introduction to the Fusion Code" title="Direct link to Introduction to the Fusion Code">​</a></h2>
<p>Understanding the structure and components of the fusion code is essential for implementing the Multi-Instance Kalman Filter effectively.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workspace-structure">Workspace Structure<a href="#workspace-structure" class="hash-link" aria-label="Direct link to Workspace Structure" title="Direct link to Workspace Structure">​</a></h3>
<p>The overall modular structure of the tracking code template is outlined in the <a href="https://github.com/ika-rwth-aachen/acdc/tree/main/catkin_workspace/src/workshops/section_3" target="_blank" rel="noopener noreferrer">README.md of the section_3 folder</a>. While it&#x27;s beneficial to review this structure, the exercises can be completed without deep familiarity with these files.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="object-fusion-package">Object Fusion Package<a href="#object-fusion-package" class="hash-link" aria-label="Direct link to Object Fusion Package" title="Direct link to Object Fusion Package">​</a></h3>
<p>A critical component is the <a href="https://github.com/ika-rwth-aachen/acdc/tree/main/catkin_workspace/src/workshops/section_3/object_fusion" target="_blank" rel="noopener noreferrer">README.md of the object_fusion package</a>. This document provides detailed information on how mathematical symbols from the ACDC slides correspond to variables and functions within the codebase. Understanding this mapping is crucial for implementing and debugging the fusion algorithms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-fusion-node">Running the Fusion Node<a href="#running-the-fusion-node" class="hash-link" aria-label="Direct link to Running the Fusion Node" title="Direct link to Running the Fusion Node">​</a></h3>
<p>Before implementing any prediction logic, it&#x27;s important to observe the current state of the fusion node:</p>
<ol>
<li>
<p><strong>Launch the Fusion Node:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch object_fusion_wrapper fusion.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Ensure RViz and Rosbag Playback are Active:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch acdc_launchpack bag_playback.launch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="observing-the-current-output">Observing the Current Output<a href="#observing-the-current-output" class="hash-link" aria-label="Direct link to Observing the Current Output" title="Direct link to Observing the Current Output">​</a></h3>
<p>With the fusion node running, you should observe RViz displaying &quot;shooting&quot; objects at intervals, which disappear shortly after. This indicates that while parts of the object tracking are implemented, the system is not yet fully functional.</p>
<p><img decoding="async" loading="lazy" alt="unfinished_fusion_rviz" src="/Autonomous-Connected-Driving/assets/images/unfinished_fusion_rviz-eb70589d28d1a767d6b9c10eded2916f.gif" width="512" height="580" class="img_ev3q"></p>
<p><em>Note: Before making any changes, ensure that the workspace is rebuilt using <code>catkin build</code>.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-implement-object-prediction">Task 1: Implement Object Prediction<a href="#task-1-implement-object-prediction" class="hash-link" aria-label="Direct link to Task 1: Implement Object Prediction" title="Direct link to Task 1: Implement Object Prediction">​</a></h2>
<p>Your first task involves enhancing the <code>StatePredictor.cpp</code> module to enable accurate prediction of object states using the Kalman Filter. This section provides a step-by-step guide to implementing the object prediction functionality.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>The goal is to predict the future states of detected objects based on their current states, leveraging the Kalman Filter&#x27;s prediction capabilities. This involves updating the state vectors and error covariances for each tracked object.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-implementation">Step-by-Step Implementation<a href="#step-by-step-implementation" class="hash-link" aria-label="Direct link to Step-by-Step Implementation" title="Direct link to Step-by-Step Implementation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-accessing-and-overwriting-global-object-list">1. Accessing and Overwriting Global Object List<a href="#1-accessing-and-overwriting-global-object-list" class="hash-link" aria-label="Direct link to 1. Accessing and Overwriting Global Object List" title="Direct link to 1. Accessing and Overwriting Global Object List">​</a></h4>
<p>For both prediction and measurement updates, you need to <strong>overwrite</strong> the global object list <code>data_-&gt;object_list_fused.objects</code> instead of using <code>return</code> statements. This approach ensures that any modifications made to the Eigen data structures directly affect the original <code>IkaObject</code> instances.</p>
<p><strong>Important Consideration:</strong></p>
<ul>
<li>Utility functions like <code>IkaUtilities::getEigenStateVec(myIkaObject)</code> return Eigen vectors or matrices that reference the original memory. Therefore, modifying these Eigen structures will automatically update the corresponding <code>IkaObject</code>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-constructing-the-motion-model-matrix-mathbff">2. Constructing the Motion Model Matrix (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi></mrow><annotation encoding="application/x-tex">\mathbf{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em"></span><span class="mord mathbf">F</span></span></span></span>)<a href="#2-constructing-the-motion-model-matrix-mathbff" class="hash-link" aria-label="Direct link to 2-constructing-the-motion-model-matrix-mathbff" title="Direct link to 2-constructing-the-motion-model-matrix-mathbff">​</a></h4>
<p>The motion model matrix <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi></mrow><annotation encoding="application/x-tex">\mathbf{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em"></span><span class="mord mathbf">F</span></span></span></span> predicts the next state of an object based on its current state and motion assumptions.</p>
<ul>
<li>
<p><strong>Constant Velocity Model:</strong></p>
<ul>
<li><strong>Constant Entries:</strong> Provided in <code>data_-&gt;F_const_</code>.</li>
<li><strong>Time-Variant Entries:</strong> Provided in <code>data_-&gt;F_timevar_</code>.</li>
</ul>
</li>
<li>
<p><strong>Time Step (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span></span></span></span>):</strong></p>
<ul>
<li>Given in <code>data_-&gt;prediction_gap_in_seconds</code>.</li>
</ul>
</li>
<li>
<p><strong>Assembly of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi></mrow><annotation encoding="application/x-tex">\mathbf{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em"></span><span class="mord mathbf">F</span></span></span></span>:</strong></p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">MatrixXf F </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">F_const_ </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">prediction_gap_in_seconds </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">F_timevar_</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Configuration:</strong></p>
<ul>
<li>The matrices <code>F_const_</code> and <code>F_timevar_</code> are defined in the file <code>section_3/object_fusion_wrapper/param/kalman_filter.yaml</code>.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-constructing-the-motion-noise-matrix-mathbfq">3. Constructing the Motion Noise Matrix (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Q</mi></mrow><annotation encoding="application/x-tex">\mathbf{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord mathbf">Q</span></span></span></span>)<a href="#3-constructing-the-motion-noise-matrix-mathbfq" class="hash-link" aria-label="Direct link to 3-constructing-the-motion-noise-matrix-mathbfq" title="Direct link to 3-constructing-the-motion-noise-matrix-mathbfq">​</a></h4>
<p>The motion noise matrix <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Q</mi></mrow><annotation encoding="application/x-tex">\mathbf{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord mathbf">Q</span></span></span></span> accounts for the uncertainty in the motion model.</p>
<ul>
<li>
<p><strong>Dependence on Time Step:</strong></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Q</mi><mo>=</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo>×</mo><msub><mi mathvariant="bold">Q</mi><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>v</mi><mi>a</mi><mi>r</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathbf{Q} = \Delta t \times \mathbf{Q}_{timevar}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord mathbf">Q</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathbf">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
<li>
<p><strong>Implementation:</strong></p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Eigen</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">MatrixXf Q </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">prediction_gap_in_seconds </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Q_timevar_</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Configuration:</strong></p>
<ul>
<li>The matrix <code>Q_timevar_</code> is defined in <code>section_3/object_fusion_wrapper/param/kalman_filter.yaml</code>.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-performing-the-kalman-filter-prediction-step">4. Performing the Kalman Filter Prediction Step<a href="#4-performing-the-kalman-filter-prediction-step" class="hash-link" aria-label="Direct link to 4. Performing the Kalman Filter Prediction Step" title="Direct link to 4. Performing the Kalman Filter Prediction Step">​</a></h4>
<p>Loop through each global object and apply the Kalman Filter&#x27;s prediction equations.</p>
<p><strong>Implementation Steps:</strong></p>
<ol>
<li>
<p><strong>Iterate Over Global Objects:</strong></p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">globalObject </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">object_list_fused</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Access and modify each globalObject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Retrieve State Vector and Error Covariance:</strong></p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> x_hat_G </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">IkaUtilities</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getEigenStateVec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">globalObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// State vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> P </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> globalObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">P</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Error covariance matrix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Apply Prediction Equations:</strong>
The standard Kalman Filter prediction step involves:</p>
<ul>
<li><strong>State Prediction:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mover accent="true"><mi>x</mi><mo>^</mo></mover><mi>G</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><mi mathvariant="bold">F</mi><msub><mover accent="true"><mi>x</mi><mo>^</mo></mover><mi>G</mi></msub></mrow><annotation encoding="application/x-tex">\hat{x}_G&#x27; = \mathbf{F} \hat{x}_G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0272em;vertical-align:-0.2753em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">x</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-2.4247em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord mathbf">F</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">x</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></li>
<li><strong>Covariance Prediction:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">P</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mi mathvariant="bold">F</mi><mi mathvariant="bold">P</mi><msup><mi mathvariant="bold">F</mi><mi>T</mi></msup><mo>+</mo><mi mathvariant="bold">Q</mi></mrow><annotation encoding="application/x-tex">\mathbf{P}&#x27; = \mathbf{F} \mathbf{P} \mathbf{F}^T + \mathbf{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em"></span><span class="mord"><span class="mord mathbf">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9247em;vertical-align:-0.0833em"></span><span class="mord mathbf">FP</span><span class="mord"><span class="mord mathbf">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord mathbf">Q</span></span></span></span></li>
</ul>
<p><strong>Code Implementation:</strong></p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// State prediction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x_hat_G </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> F </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> x_hat_G</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Covariance prediction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> F </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> P </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> F</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">transpose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> Q</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Update the global object with the predicted state and covariance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">IkaUtilities</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">setEigenStateVec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_hat_G</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">globalObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">globalObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">P</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Update Time Stamps:</strong>
After prediction, the time stamps of both the global object list and individual objects should reflect the latest measurements.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Update global object list time stamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">object_list_fused</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">object_list_measured</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Update individual object time stamps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">globalObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">object_list_measured</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stamp</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-finalizing-the-prediction-module">5. Finalizing the Prediction Module<a href="#5-finalizing-the-prediction-module" class="hash-link" aria-label="Direct link to 5. Finalizing the Prediction Module" title="Direct link to 5. Finalizing the Prediction Module">​</a></h4>
<p>After implementing the above steps, ensure that the prediction module is correctly integrated into the fusion pipeline.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-the-implementation">Verifying the Implementation<a href="#verifying-the-implementation" class="hash-link" aria-label="Direct link to Verifying the Implementation" title="Direct link to Verifying the Implementation">​</a></h3>
<ol>
<li>
<p><strong>Rebuild the Workspace:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">catkin build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Run the Fusion Node:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch object_fusion_wrapper fusion.launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Play the Rosbag:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">roslaunch acdc_launchpack bag_playback.launch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Observe the Predictions in RViz:</strong>
The fused objects should now be predicted based on their current states. Although they are not yet updated with new measurements, the predictions should closely follow the actual object movements, gradually diverging as time progresses.</p>
<p><img decoding="async" loading="lazy" alt="task_1_fusion_rviz" src="/Autonomous-Connected-Driving/assets/images/task_1_fusion_rviz-9ff2a9489964acf03014480d31f253d8.gif" width="514" height="522" class="img_ev3q"></p>
</li>
</ol>
<p><em>Note: If discrepancies are observed, revisit the prediction equations and ensure that the matrices <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi></mrow><annotation encoding="application/x-tex">\mathbf{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em"></span><span class="mord mathbf">F</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Q</mi></mrow><annotation encoding="application/x-tex">\mathbf{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8805em;vertical-align:-0.1944em"></span><span class="mord mathbf">Q</span></span></span></span> are correctly configured.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-introspection-in-rviz">Advanced: Introspection in RViz<a href="#advanced-introspection-in-rviz" class="hash-link" aria-label="Direct link to Advanced: Introspection in RViz" title="Direct link to Advanced: Introspection in RViz">​</a></h2>
<p>Understanding the internal states and properties of tracked objects can provide deeper insights into the tracking performance and potential issues. RViz offers advanced features that facilitate this introspection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="steps-to-inspect-object-properties">Steps to Inspect Object Properties<a href="#steps-to-inspect-object-properties" class="hash-link" aria-label="Direct link to Steps to Inspect Object Properties" title="Direct link to Steps to Inspect Object Properties">​</a></h3>
<ol>
<li>
<p><strong>Focus on the RViz Window:</strong></p>
<ul>
<li>Click inside the RViz window to ensure it is the active window for interaction.</li>
</ul>
</li>
<li>
<p><strong>Activate Selection Mode:</strong></p>
<ul>
<li>Press the <kbd>S</kbd> key. The cursor will change to yellow, indicating that selection mode is active.</li>
</ul>
</li>
<li>
<p><strong>Select Objects:</strong></p>
<ul>
<li><strong>Single Selection:</strong> Click on individual objects to select them.</li>
<li><strong>Multiple Selection:</strong> Click and drag to draw a rectangle around multiple objects for batch selection.</li>
</ul>
</li>
<li>
<p><strong>View Object Properties:</strong></p>
<ul>
<li>Once objects are selected, navigate to the <strong>Selection Panel</strong> on the right side of RViz.</li>
<li>This panel will display real-time updates of the selected objects&#x27; properties, such as position, velocity, and covariance.</li>
</ul>
</li>
<li>
<p><strong>Exit Selection Mode:</strong></p>
<ul>
<li><strong>Deselect All Objects:</strong> Click on an empty area within the RViz window.</li>
<li><strong>Deactivate Selection Mode:</strong> Press the <kbd>S</kbd> key again.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="visual-guide">Visual Guide<a href="#visual-guide" class="hash-link" aria-label="Direct link to Visual Guide" title="Direct link to Visual Guide">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Introspection in RViz" src="/Autonomous-Connected-Driving/assets/images/selection_screenshot-f93d0c66b9ed6c4309954cc36cb45c40.png" width="842" height="467" class="img_ev3q"></p>
<p><em>Figure: RViz Selection Panel displaying object properties after selecting objects.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-of-introspection">Benefits of Introspection<a href="#benefits-of-introspection" class="hash-link" aria-label="Direct link to Benefits of Introspection" title="Direct link to Benefits of Introspection">​</a></h3>
<ul>
<li><strong>Debugging:</strong> Quickly identify anomalies or inconsistencies in object states.</li>
<li><strong>Performance Analysis:</strong> Assess the accuracy and reliability of the tracking algorithms.</li>
<li><strong>Educational Insight:</strong> Gain a deeper understanding of how different components of the Kalman Filter influence object tracking.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>This workshop has guided you through the foundational steps of implementing a Multi-Instance Kalman Filter for object prediction within a ROS1 environment. By leveraging the Eigen library for efficient computations and utilizing advanced visualization tools like RViz, you&#x27;ve built a robust framework for multi-object tracking.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/task/03_object_fusion_tracking/01_Object-Prediction.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Autonomous-Connected-Driving/docs/category/object-fusion-tracking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Object Fusion Tracking</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Association"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Object Association</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a><ul><li><a href="#implement-core-tracking-components" class="table-of-contents__link toc-highlight">Implement Core Tracking Components</a></li><li><a href="#gain-practical-skills" class="table-of-contents__link toc-highlight">Gain Practical Skills</a></li></ul></li><li><a href="#introduction-to-the-workshop" class="table-of-contents__link toc-highlight">Introduction to the Workshop</a><ul><li><a href="#downloading-the-rosbag-file" class="table-of-contents__link toc-highlight">Downloading the Rosbag File</a></li><li><a href="#understanding-the-rosbag-contents" class="table-of-contents__link toc-highlight">Understanding the Rosbag Contents</a></li></ul></li><li><a href="#visualizing-object-detections" class="table-of-contents__link toc-highlight">Visualizing Object Detections</a><ul><li><a href="#building-the-workspace" class="table-of-contents__link toc-highlight">Building the Workspace</a></li><li><a href="#launching-visualization-and-playback" class="table-of-contents__link toc-highlight">Launching Visualization and Playback</a></li><li><a href="#expected-visualization" class="table-of-contents__link toc-highlight">Expected Visualization</a></li></ul></li><li><a href="#introduction-to-the-eigen-library" class="table-of-contents__link toc-highlight">Introduction to the Eigen Library</a><ul><li><a href="#basic-usage-examples" class="table-of-contents__link toc-highlight">Basic Usage Examples</a></li><li><a href="#exploring-eigen-further" class="table-of-contents__link toc-highlight">Exploring Eigen Further</a></li></ul></li><li><a href="#introduction-to-the-fusion-code" class="table-of-contents__link toc-highlight">Introduction to the Fusion Code</a><ul><li><a href="#workspace-structure" class="table-of-contents__link toc-highlight">Workspace Structure</a></li><li><a href="#object-fusion-package" class="table-of-contents__link toc-highlight">Object Fusion Package</a></li><li><a href="#running-the-fusion-node" class="table-of-contents__link toc-highlight">Running the Fusion Node</a></li><li><a href="#observing-the-current-output" class="table-of-contents__link toc-highlight">Observing the Current Output</a></li></ul></li><li><a href="#task-1-implement-object-prediction" class="table-of-contents__link toc-highlight">Task 1: Implement Object Prediction</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#step-by-step-implementation" class="table-of-contents__link toc-highlight">Step-by-Step Implementation</a></li><li><a href="#verifying-the-implementation" class="table-of-contents__link toc-highlight">Verifying the Implementation</a></li></ul></li><li><a href="#advanced-introspection-in-rviz" class="table-of-contents__link toc-highlight">Advanced: Introspection in RViz</a><ul><li><a href="#steps-to-inspect-object-properties" class="table-of-contents__link toc-highlight">Steps to Inspect Object Properties</a></li><li><a href="#visual-guide" class="table-of-contents__link toc-highlight">Visual Guide</a></li><li><a href="#benefits-of-introspection" class="table-of-contents__link toc-highlight">Benefits of Introspection</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/cpp/getting_started">C++</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/python/getting_started">Python</a></li></ul></div><div class="col footer__col"><div class="footer__title">Robot Operating System</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros/getting_started">ROS</a></li><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/docs/ros2/getting_started">ROS2</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Autonomous-Connected-Driving/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Autonomous-Connected-Driving" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 - Automated and Connected Driving.</div></div></div></footer></div>
</body>
</html>