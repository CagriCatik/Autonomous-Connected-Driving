"use strict";(self.webpackChunkacd=self.webpackChunkacd||[]).push([[2590],{3032:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"task/object_fusion_tracking/Object-Prediction","title":"Object Prediction","description":"ROS1","source":"@site/docs/task/03_object_fusion_tracking/01_Object-Prediction.md","sourceDirName":"task/03_object_fusion_tracking","slug":"/task/object_fusion_tracking/Object-Prediction","permalink":"/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Prediction","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/task/03_object_fusion_tracking/01_Object-Prediction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"taskSidebar","previous":{"title":"Object Fusion Tracking","permalink":"/Autonomous-Connected-Driving/docs/category/object-fusion-tracking"},"next":{"title":"Object Association","permalink":"/Autonomous-Connected-Driving/docs/task/object_fusion_tracking/Object-Association"}}');var t=n(4848),a=n(8453);const l={},r="Object Prediction",c={},o=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Implement Core Tracking Components",id:"implement-core-tracking-components",level:3},{value:"Gain Practical Skills",id:"gain-practical-skills",level:3},{value:"Introduction to the Workshop",id:"introduction-to-the-workshop",level:2},{value:"Downloading the Rosbag File",id:"downloading-the-rosbag-file",level:3},{value:"Understanding the Rosbag Contents",id:"understanding-the-rosbag-contents",level:3},{value:"Visualizing Object Detections",id:"visualizing-object-detections",level:2},{value:"Building the Workspace",id:"building-the-workspace",level:3},{value:"Launching Visualization and Playback",id:"launching-visualization-and-playback",level:3},{value:"Expected Visualization",id:"expected-visualization",level:3},{value:"Introduction to the Eigen Library",id:"introduction-to-the-eigen-library",level:2},{value:"Basic Usage Examples",id:"basic-usage-examples",level:3},{value:"Exploring Eigen Further",id:"exploring-eigen-further",level:3},{value:"Introduction to the Fusion Code",id:"introduction-to-the-fusion-code",level:2},{value:"Workspace Structure",id:"workspace-structure",level:3},{value:"Object Fusion Package",id:"object-fusion-package",level:3},{value:"Running the Fusion Node",id:"running-the-fusion-node",level:3},{value:"Observing the Current Output",id:"observing-the-current-output",level:3},{value:"Task 1: Implement Object Prediction",id:"task-1-implement-object-prediction",level:2},{value:"Overview",id:"overview",level:3},{value:"Step-by-Step Implementation",id:"step-by-step-implementation",level:3},{value:"1. Accessing and Overwriting Global Object List",id:"1-accessing-and-overwriting-global-object-list",level:4},{value:"2. Constructing the Motion Model Matrix (\\mathbf{F})",id:"2-constructing-the-motion-model-matrix-mathbff",level:4},{value:"3. Constructing the Motion Noise Matrix (\\mathbf{Q})",id:"3-constructing-the-motion-noise-matrix-mathbfq",level:4},{value:"4. Performing the Kalman Filter Prediction Step",id:"4-performing-the-kalman-filter-prediction-step",level:4},{value:"5. Finalizing the Prediction Module",id:"5-finalizing-the-prediction-module",level:4},{value:"Verifying the Implementation",id:"verifying-the-implementation",level:3},{value:"Advanced: Introspection in RViz",id:"advanced-introspection-in-rviz",level:2},{value:"Steps to Inspect Object Properties",id:"steps-to-inspect-object-properties",level:3},{value:"Visual Guide",id:"visual-guide",level:3},{value:"Benefits of Introspection",id:"benefits-of-introspection",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const s={a:"a",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",math:"math",mi:"mi",mo:"mo",mover:"mover",mrow:"mrow",msub:"msub",msubsup:"msubsup",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"object-prediction",children:"Object Prediction"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://img.shields.io/badge/ROS1-blue",alt:"ROS1"})}),"\n",(0,t.jsxs)(s.p,{children:["In this session, you will be guided through the process of programming a ",(0,t.jsx)(s.strong,{children:"Multi-Instance Kalman Filter"})," within a ",(0,t.jsx)(s.strong,{children:"ROS"})," node. This comprehensive workshop is designed to equip you with both foundational and advanced skills in object prediction, association, and fusion using ROS1."]}),"\n",(0,t.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(s.p,{children:"By the end of this workshop, you will:"}),"\n",(0,t.jsx)(s.h3,{id:"implement-core-tracking-components",children:"Implement Core Tracking Components"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Object Prediction:"})," Forecast the future states of detected objects based on their current states."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Object Association:"})," Match detected objects across different sensor frames to maintain consistent tracking."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Object Fusion:"})," Combine information from multiple sensors to improve tracking accuracy."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"gain-practical-skills",children:"Gain Practical Skills"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Inspect and Visualize Data:"})," Learn to work with rosbag files containing object data."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Utilize the Eigen Library:"})," Perform efficient matrix and vector computations."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Leverage Advanced RViz Features:"})," Enhance your visualization capabilities for better data analysis."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"introduction-to-the-workshop",children:"Introduction to the Workshop"}),"\n",(0,t.jsx)(s.p,{children:"In this workshop, we utilize simulated data from a vehicle equipped with both a camera and a radar. These sensors provide complementary data:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Camera:"})," Offers high accuracy in the lateral (side-to-side) direction but exhibits higher uncertainty in the longitudinal (front-to-back) direction."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Radar:"})," Contrarily, provides precise longitudinal measurements but less accurate lateral data."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["The simulated environment is based on the ",(0,t.jsx)(s.strong,{children:"ika test track"}),", ensuring realistic scenarios for object detection and tracking."]}),"\n",(0,t.jsx)(s.h3,{id:"downloading-the-rosbag-file",children:"Downloading the Rosbag File"}),"\n",(0,t.jsx)(s.p,{children:"To begin, download the required rosbag file from the following link:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"https://rwth-aachen.sciebo.de/s/F2M2P4G63aaRryB",children:"Download Rosbag"})})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Instructions:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Save the downloaded file to the local directory ",(0,t.jsx)(s.code,{children:"acdc/bag"})," on your host machine."]}),"\n",(0,t.jsxs)(s.li,{children:["Start Docker by navigating to the ",(0,t.jsx)(s.code,{children:"acdc/docker"})," directory and executing the startup script:","\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cd acdc/docker\n./ros1_run.sh\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Inspect the contents of the rosbag using the ",(0,t.jsx)(s.code,{children:"rosbag info"})," command:","\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"rosuser@docker:~/ws/bag$ rosbag info acdc_fusion_guidance_noise.bag\npath:        acdc_fusion_guidance_noise.bag\nversion:     2.0\nduration:    9:59s (599s)\nstart:       Jan 01 1970 01:00:02.51 (2.51)\nend:         Jan 01 1970 01:10:02.50 (602.50)\nsize:        77.4 MB\nmessages:    125992\ncompression: none [102/102 chunks]\ntypes:       definitions/IkaEgoMotion  [e0618c9f9aa211f416eed80f5aa9a953]\n             definitions/IkaGPS        [be18f6276d518be76f37af636e04fd9f]\n             definitions/IkaObjectList [a997953d24fa0f3e837de98bfab1882a]\ntopics:      /ikaGPS                               59993 msgs    : definitions/IkaGPS\n             /sensors/camera_front/ikaObjectList   12000 msgs    : definitions/IkaObjectList\n             /sensors/radar_front/ikaObjectList    12000 msgs    : definitions/IkaObjectList\n             /sensors/reference/ikaObjectList      12000 msgs    : definitions/IkaObjectList\n             /sensors/vehicleCAN/ikaEgoMotion      29999 msgs    : definitions/IkaEgoMotion\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"understanding-the-rosbag-contents",children:"Understanding the Rosbag Contents"}),"\n",(0,t.jsx)(s.p,{children:"The rosbag file includes the following key topics:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Object Detection Topics:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"/sensors/camera_front/ikaObjectList"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"/sensors/radar_front/ikaObjectList"})}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["These topics publish lists of detected objects from the front camera and radar sensors, respectively. For more details on the ",(0,t.jsx)(s.code,{children:"ikaObjectList"})," message type, refer to ",(0,t.jsx)(s.a,{href:"https://github.com/ika-rwth-aachen/acdc/wiki/Section-2-Object-Detection",children:"Section 2: Object Detection"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Vehicle State Topics:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"/ikaGPS"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"/sensors/vehicleCAN/ikaEgoMotion"})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"These topics provide the positional data of the ego vehicle, essential for accurate object tracking and fusion."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"visualizing-object-detections",children:"Visualizing Object Detections"}),"\n",(0,t.jsx)(s.p,{children:"Visualization is crucial for understanding how object detections and tracking behave over time. This section guides you through setting up and visualizing the object detections using RViz."}),"\n",(0,t.jsx)(s.h3,{id:"building-the-workspace",children:"Building the Workspace"}),"\n",(0,t.jsx)(s.p,{children:"Within the Docker container, execute the following commands to build the workspace and set up the environment:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"catkin build\nsource devel/setup.bash  # Ensure this is run in each new terminal session\n"})}),"\n",(0,t.jsx)(s.h3,{id:"launching-visualization-and-playback",children:"Launching Visualization and Playback"}),"\n",(0,t.jsx)(s.p,{children:"Open multiple terminals and execute the following commands to launch RViz and play back the rosbag:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Terminal 1: Launch the preconfigured RViz window\nroslaunch acdc_launchpack bag_playback.launch\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Terminal 2: Play the rosbag file in a loop\nrosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag\n"})}),"\n",(0,t.jsx)(s.h3,{id:"expected-visualization",children:"Expected Visualization"}),"\n",(0,t.jsx)(s.p,{children:"Upon successful execution, RViz will display the simulated environment with detected objects visualized in real-time. The visualization should resemble the following output:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"detections_rviz",src:n(6772).A+"",width:"516",height:"584"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.em,{children:"Note: Ensure that the Docker container is running and the rosbag is correctly placed in the specified directory."})}),"\n",(0,t.jsx)(s.h2,{id:"introduction-to-the-eigen-library",children:"Introduction to the Eigen Library"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://eigen.tuxfamily.org/dox/GettingStarted.html",children:"Eigen"})," is a high-performance C++ library for linear algebra, including matrices, vectors, and related algorithms. It is widely used in robotics and computer vision for efficient mathematical computations."]}),"\n",(0,t.jsx)(s.h3,{id:"basic-usage-examples",children:"Basic Usage Examples"}),"\n",(0,t.jsx)(s.p,{children:"Here are some fundamental operations using the Eigen library:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"#include <Eigen/Dense>\n\n// Create a copy of an existing matrix of floating-point numbers\nEigen::MatrixXf myNewMatrix1 = myExistingMatrixOfEqualDimensions;\n\n// Create a 3x3 matrix of zeros\nEigen::MatrixXf myNewMatrix2 = Eigen::MatrixXf::Zero(3, 3); \n\n// Edit a specific matrix entry\nmyNewMatrix2(0, 0) = 5.678; \n\n// Multiply, add, and subtract matrices or vectors (dimensions must align)\nA = B * C * (d + e - f); \n\n// Create a vector of floating-point numbers\nEigen::VectorXf myNewVector = someMatrix * someVector;\n\n// Transpose or invert matrices\nA = B.transpose() + C.inverse();\n"})}),"\n",(0,t.jsx)(s.h3,{id:"exploring-eigen-further",children:"Exploring Eigen Further"}),"\n",(0,t.jsx)(s.p,{children:"To delve deeper into Eigen's capabilities, you can:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Search for Specific Operations:"}),' Use search terms like "Eigen identity matrix" to find relevant functions and examples.']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Refer to Documentation:"})," Utilize the ",(0,t.jsx)(s.a,{href:"https://eigen.tuxfamily.org/dox/",children:"Eigen Documentation"})," for comprehensive guides and references."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Utilize IDE Features:"})," Use ",(0,t.jsx)("kbd",{children:"Ctrl"}),"+",(0,t.jsx)("kbd",{children:"F"})," to quickly navigate through the documentation or your codebase."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"introduction-to-the-fusion-code",children:"Introduction to the Fusion Code"}),"\n",(0,t.jsx)(s.p,{children:"Understanding the structure and components of the fusion code is essential for implementing the Multi-Instance Kalman Filter effectively."}),"\n",(0,t.jsx)(s.h3,{id:"workspace-structure",children:"Workspace Structure"}),"\n",(0,t.jsxs)(s.p,{children:["The overall modular structure of the tracking code template is outlined in the ",(0,t.jsx)(s.a,{href:"https://github.com/ika-rwth-aachen/acdc/tree/main/catkin_workspace/src/workshops/section_3",children:"README.md of the section_3 folder"}),". While it's beneficial to review this structure, the exercises can be completed without deep familiarity with these files."]}),"\n",(0,t.jsx)(s.h3,{id:"object-fusion-package",children:"Object Fusion Package"}),"\n",(0,t.jsxs)(s.p,{children:["A critical component is the ",(0,t.jsx)(s.a,{href:"https://github.com/ika-rwth-aachen/acdc/tree/main/catkin_workspace/src/workshops/section_3/object_fusion",children:"README.md of the object_fusion package"}),". This document provides detailed information on how mathematical symbols from the ACDC slides correspond to variables and functions within the codebase. Understanding this mapping is crucial for implementing and debugging the fusion algorithms."]}),"\n",(0,t.jsx)(s.h3,{id:"running-the-fusion-node",children:"Running the Fusion Node"}),"\n",(0,t.jsx)(s.p,{children:"Before implementing any prediction logic, it's important to observe the current state of the fusion node:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Launch the Fusion Node:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"roslaunch object_fusion_wrapper fusion.launch\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Ensure RViz and Rosbag Playback are Active:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"roslaunch acdc_launchpack bag_playback.launch\nrosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"observing-the-current-output",children:"Observing the Current Output"}),"\n",(0,t.jsx)(s.p,{children:'With the fusion node running, you should observe RViz displaying "shooting" objects at intervals, which disappear shortly after. This indicates that while parts of the object tracking are implemented, the system is not yet fully functional.'}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"unfinished_fusion_rviz",src:n(4354).A+"",width:"512",height:"580"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note: Before making any changes, ensure that the workspace is rebuilt using ",(0,t.jsx)(s.code,{children:"catkin build"}),"."]})}),"\n",(0,t.jsx)(s.h2,{id:"task-1-implement-object-prediction",children:"Task 1: Implement Object Prediction"}),"\n",(0,t.jsxs)(s.p,{children:["Your first task involves enhancing the ",(0,t.jsx)(s.code,{children:"StatePredictor.cpp"})," module to enable accurate prediction of object states using the Kalman Filter. This section provides a step-by-step guide to implementing the object prediction functionality."]}),"\n",(0,t.jsx)(s.h3,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(s.p,{children:"The goal is to predict the future states of detected objects based on their current states, leveraging the Kalman Filter's prediction capabilities. This involves updating the state vectors and error covariances for each tracked object."}),"\n",(0,t.jsx)(s.h3,{id:"step-by-step-implementation",children:"Step-by-Step Implementation"}),"\n",(0,t.jsx)(s.h4,{id:"1-accessing-and-overwriting-global-object-list",children:"1. Accessing and Overwriting Global Object List"}),"\n",(0,t.jsxs)(s.p,{children:["For both prediction and measurement updates, you need to ",(0,t.jsx)(s.strong,{children:"overwrite"})," the global object list ",(0,t.jsx)(s.code,{children:"data_->object_list_fused.objects"})," instead of using ",(0,t.jsx)(s.code,{children:"return"})," statements. This approach ensures that any modifications made to the Eigen data structures directly affect the original ",(0,t.jsx)(s.code,{children:"IkaObject"})," instances."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Important Consideration:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Utility functions like ",(0,t.jsx)(s.code,{children:"IkaUtilities::getEigenStateVec(myIkaObject)"})," return Eigen vectors or matrices that reference the original memory. Therefore, modifying these Eigen structures will automatically update the corresponding ",(0,t.jsx)(s.code,{children:"IkaObject"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.h4,{id:"2-constructing-the-motion-model-matrix-mathbff",children:["2. Constructing the Motion Model Matrix (",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{F}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6861em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"})]})})]}),")"]}),"\n",(0,t.jsxs)(s.p,{children:["The motion model matrix ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{F}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6861em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"})]})})]})," predicts the next state of an object based on its current state and motion assumptions."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Constant Velocity Model:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Constant Entries:"})," Provided in ",(0,t.jsx)(s.code,{children:"data_->F_const_"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Time-Variant Entries:"})," Provided in ",(0,t.jsx)(s.code,{children:"data_->F_timevar_"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Time Step (",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(s.mi,{children:"t"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\Delta t"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"t"})]})})]}),"):"]})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Given in ",(0,t.jsx)(s.code,{children:"data_->prediction_gap_in_seconds"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Assembly of ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{F}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6861em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"})]})})]}),":"]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"Eigen::MatrixXf F = data_->F_const_ + data_->prediction_gap_in_seconds * data_->F_timevar_;\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Configuration:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["The matrices ",(0,t.jsx)(s.code,{children:"F_const_"})," and ",(0,t.jsx)(s.code,{children:"F_timevar_"})," are defined in the file ",(0,t.jsx)(s.code,{children:"section_3/object_fusion_wrapper/param/kalman_filter.yaml"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.h4,{id:"3-constructing-the-motion-noise-matrix-mathbfq",children:["3. Constructing the Motion Noise Matrix (",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{Q}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"})]})})]}),")"]}),"\n",(0,t.jsxs)(s.p,{children:["The motion noise matrix ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{Q}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"})]})})]})," accounts for the uncertainty in the motion model."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Dependence on Time Step:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(s.mi,{children:"t"}),(0,t.jsx)(s.mo,{children:"\xd7"}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"}),(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{children:"t"}),(0,t.jsx)(s.mi,{children:"i"}),(0,t.jsx)(s.mi,{children:"m"}),(0,t.jsx)(s.mi,{children:"e"}),(0,t.jsx)(s.mi,{children:"v"}),(0,t.jsx)(s.mi,{children:"a"}),(0,t.jsx)(s.mi,{children:"r"})]})]})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{Q} = \\Delta t \\times \\mathbf{Q}_{timevar}"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,t.jsx)(s.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3117em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsxs)(s.span,{className:"mord mtight",children:[(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"im"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"v"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"r"})]})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]})]})]})]})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Implementation:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"Eigen::MatrixXf Q = data_->prediction_gap_in_seconds * data_->Q_timevar_;\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Configuration:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["The matrix ",(0,t.jsx)(s.code,{children:"Q_timevar_"})," is defined in ",(0,t.jsx)(s.code,{children:"section_3/object_fusion_wrapper/param/kalman_filter.yaml"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h4,{id:"4-performing-the-kalman-filter-prediction-step",children:"4. Performing the Kalman Filter Prediction Step"}),"\n",(0,t.jsx)(s.p,{children:"Loop through each global object and apply the Kalman Filter's prediction equations."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Implementation Steps:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Iterate Over Global Objects:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"for(auto &globalObject : data_->object_list_fused.objects) {\n    // Access and modify each globalObject\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Retrieve State Vector and Error Covariance:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"auto x_hat_G = IkaUtilities::getEigenStateVec(&globalObject);  // State vector\nauto P = globalObject.P();  // Error covariance matrix\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Apply Prediction Equations:"}),"\nThe standard Kalman Filter prediction step involves:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"State Prediction:"})," ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsxs)(s.msubsup,{children:[(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"x"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mi,{children:"G"}),(0,t.jsx)(s.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"}),(0,t.jsxs)(s.msub,{children:[(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"x"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mi,{children:"G"})]})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\hat{x}_G' = \\mathbf{F} \\hat{x}_G"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.0272em",verticalAlign:"-0.2753em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"x"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.7519em"},children:[(0,t.jsxs)(s.span,{style:{top:"-2.4247em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"G"})})]}),(0,t.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"\u2032"})})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.2753em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"x"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"G"})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]})]})]})]})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Covariance Prediction:"})," ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsxs)(s.msup,{children:[(0,t.jsx)(s.mi,{mathvariant:"bold",children:"P"}),(0,t.jsx)(s.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"}),(0,t.jsx)(s.mi,{mathvariant:"bold",children:"P"}),(0,t.jsxs)(s.msup,{children:[(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"}),(0,t.jsx)(s.mi,{children:"T"})]}),(0,t.jsx)(s.mo,{children:"+"}),(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{P}' = \\mathbf{F} \\mathbf{P} \\mathbf{F}^T + \\mathbf{Q}"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.7519em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathbf",children:"P"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.7519em"},children:(0,t.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"\u2032"})})})]})})})})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.9247em",verticalAlign:"-0.0833em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"FP"}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.8413em"},children:(0,t.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"})})]})})})})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"+"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"})]})]})]})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Code Implementation:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"// State prediction\nx_hat_G = F * x_hat_G;\n\n// Covariance prediction\nP = F * P * F.transpose() + Q;\n\n// Update the global object with the predicted state and covariance\nIkaUtilities::setEigenStateVec(x_hat_G, &globalObject);\nglobalObject.setP(P);\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Update Time Stamps:"}),"\nAfter prediction, the time stamps of both the global object list and individual objects should reflect the latest measurements."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-cpp",children:"// Update global object list time stamp\ndata_->object_list_fused.header.stamp = data_->object_list_measured.header.stamp;\n\n// Update individual object time stamps\nglobalObject.header.stamp = data_->object_list_measured.header.stamp;\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h4,{id:"5-finalizing-the-prediction-module",children:"5. Finalizing the Prediction Module"}),"\n",(0,t.jsx)(s.p,{children:"After implementing the above steps, ensure that the prediction module is correctly integrated into the fusion pipeline."}),"\n",(0,t.jsx)(s.h3,{id:"verifying-the-implementation",children:"Verifying the Implementation"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Rebuild the Workspace:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"catkin build\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Run the Fusion Node:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"roslaunch object_fusion_wrapper fusion.launch\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Play the Rosbag:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"roslaunch acdc_launchpack bag_playback.launch\nrosbag play -l ~/ws/bag/acdc_fusion_guidance_noise.bag\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Observe the Predictions in RViz:"}),"\nThe fused objects should now be predicted based on their current states. Although they are not yet updated with new measurements, the predictions should closely follow the actual object movements, gradually diverging as time progresses."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"task_1_fusion_rviz",src:n(7822).A+"",width:"514",height:"522"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note: If discrepancies are observed, revisit the prediction equations and ensure that the matrices ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"F"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{F}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6861em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"F"})]})})]})," and ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{mathvariant:"bold",children:"Q"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\mathbf{Q}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8805em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathbf",children:"Q"})]})})]})," are correctly configured."]})}),"\n",(0,t.jsx)(s.h2,{id:"advanced-introspection-in-rviz",children:"Advanced: Introspection in RViz"}),"\n",(0,t.jsx)(s.p,{children:"Understanding the internal states and properties of tracked objects can provide deeper insights into the tracking performance and potential issues. RViz offers advanced features that facilitate this introspection."}),"\n",(0,t.jsx)(s.h3,{id:"steps-to-inspect-object-properties",children:"Steps to Inspect Object Properties"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Focus on the RViz Window:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Click inside the RViz window to ensure it is the active window for interaction."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Activate Selection Mode:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Press the ",(0,t.jsx)("kbd",{children:"S"})," key. The cursor will change to yellow, indicating that selection mode is active."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Select Objects:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Single Selection:"})," Click on individual objects to select them."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Multiple Selection:"})," Click and drag to draw a rectangle around multiple objects for batch selection."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"View Object Properties:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Once objects are selected, navigate to the ",(0,t.jsx)(s.strong,{children:"Selection Panel"})," on the right side of RViz."]}),"\n",(0,t.jsx)(s.li,{children:"This panel will display real-time updates of the selected objects' properties, such as position, velocity, and covariance."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Exit Selection Mode:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Deselect All Objects:"})," Click on an empty area within the RViz window."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Deactivate Selection Mode:"})," Press the ",(0,t.jsx)("kbd",{children:"S"})," key again."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"visual-guide",children:"Visual Guide"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Introspection in RViz",src:n(2854).A+"",width:"842",height:"467"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.em,{children:"Figure: RViz Selection Panel displaying object properties after selecting objects."})}),"\n",(0,t.jsx)(s.h3,{id:"benefits-of-introspection",children:"Benefits of Introspection"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Debugging:"})," Quickly identify anomalies or inconsistencies in object states."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Performance Analysis:"})," Assess the accuracy and reliability of the tracking algorithms."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Educational Insight:"})," Gain a deeper understanding of how different components of the Kalman Filter influence object tracking."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(s.p,{children:"This workshop has guided you through the foundational steps of implementing a Multi-Instance Kalman Filter for object prediction within a ROS1 environment. By leveraging the Eigen library for efficient computations and utilizing advanced visualization tools like RViz, you've built a robust framework for multi-object tracking."})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},6772:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/detections_rviz-09306bbe5aae7514290144b3a1241094.gif"},7822:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/task_1_fusion_rviz-9ff2a9489964acf03014480d31f253d8.gif"},4354:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/unfinished_fusion_rviz-eb70589d28d1a767d6b9c10eded2916f.gif"},2854:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/selection_screenshot-f93d0c66b9ed6c4309954cc36cb45c40.png"},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>r});var i=n(6540);const t={},a=i.createContext(t);function l(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);