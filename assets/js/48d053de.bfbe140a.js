"use strict";(self.webpackChunkacd=self.webpackChunkacd||[]).push([[6250],{4884:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"ros2/publisher","title":"Creating Your First ROS2 Publisher Node","description":"This guide will walk you through creating your first ROS2 publisher node. Publishers are essential components of the ROS2 communication system, as they send messages to specific topics for other nodes to receive. This tutorial is designed for both beginners and advanced users, offering clarity and technical depth.","source":"@site/docs/ros2/05_publisher.md","sourceDirName":"ros2","slug":"/ros2/publisher","permalink":"/Autonomous-Connected-Driving/docs/ros2/publisher","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ros2/05_publisher.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"ros2Sidebar","previous":{"title":"Building a ROS2 Workspace Using colcon","permalink":"/Autonomous-Connected-Driving/docs/ros2/build"},"next":{"title":"Creating Your First ROS2 Subscriber Node","permalink":"/Autonomous-Connected-Driving/docs/ros2/subscriber"}}');var r=s(4848),l=s(8453);const t={},o="Creating Your First ROS2 Publisher Node",d={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a Package",id:"step-1-create-a-package",level:2},{value:"Using Python",id:"using-python",level:3},{value:"Step 2: Write the Publisher Node",id:"step-2-write-the-publisher-node",level:2},{value:"Python Implementation",id:"python-implementation",level:3},{value:"Explanation",id:"explanation",level:3},{value:"Step 3: Update the Package Configuration",id:"step-3-update-the-package-configuration",level:2},{value:"Step 4: Build and Run the Package",id:"step-4-build-and-run-the-package",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"creating-your-first-ros2-publisher-node",children:"Creating Your First ROS2 Publisher Node"})}),"\n",(0,r.jsx)(n.p,{children:"This guide will walk you through creating your first ROS2 publisher node. Publishers are essential components of the ROS2 communication system, as they send messages to specific topics for other nodes to receive. This tutorial is designed for both beginners and advanced users, offering clarity and technical depth."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before proceeding, ensure the following:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["ROS2 Installation: ROS2 Humble or a later distribution is installed on your system. Follow the ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Installation.html",children:"official installation guide"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Workspace Setup: You have a properly configured ROS2 workspace. If not, create one:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\ncolcon build\nsource install/setup.bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Basic Knowledge: Familiarity with Python or C++ and the ROS2 node architecture."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-1-create-a-package",children:"Step 1: Create a Package"}),"\n",(0,r.jsx)(n.p,{children:"Begin by creating a new ROS2 package for your publisher node."}),"\n",(0,r.jsx)(n.h3,{id:"using-python",children:"Using Python"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Navigate to the ",(0,r.jsx)(n.code,{children:"src"})," directory of your workspace:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create the package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_publisher_pkg\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Navigate to the package directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd my_publisher_pkg\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"setup.py"})," file to include your publisher script."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-2-write-the-publisher-node",children:"Step 2: Write the Publisher Node"}),"\n",(0,r.jsx)(n.p,{children:"In ROS2, nodes are executable scripts that perform specific tasks. Here, we create a publisher node to send messages to a topic."}),"\n",(0,r.jsx)(n.h3,{id:"python-implementation",children:"Python Implementation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a directory for your Python scripts if it does not already exist:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p my_publisher_pkg/my_publisher_pkg\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Inside the ",(0,r.jsx)(n.code,{children:"my_publisher_pkg"})," folder, create a file named ",(0,r.jsx)(n.code,{children:"publisher_node.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"touch my_publisher_pkg/publisher_node.py\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Edit the ",(0,r.jsx)(n.code,{children:"publisher_node.py"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass PublisherNode(Node):\n    def __init__(self):\n        super().__init__('publisher_node')\n        self.publisher_ = self.create_publisher(String, 'topic_name', 10)\n        self.timer = self.create_timer(0.5, self.publish_message)\n        self.counter = 0\n\n    def publish_message(self):\n        msg = String()\n        msg.data = f'Hello ROS2: {self.counter}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: {msg.data}')\n        self.counter += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = PublisherNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"explanation",children:"Explanation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rclpy.node.Node"}),": Base class for creating ROS2 nodes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"create_publisher"}),": Initializes a publisher to send messages to a topic (",(0,r.jsx)(n.code,{children:"topic_name"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"create_timer"}),": Calls the ",(0,r.jsx)(n.code,{children:"publish_message"})," function at regular intervals (0.5 seconds in this case)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"std_msgs.msg.String"}),": Standard message type used for string data."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-3-update-the-package-configuration",children:"Step 3: Update the Package Configuration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Add the node to ",(0,r.jsx)(n.code,{children:"setup.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'publisher_node = my_publisher_pkg.publisher_node:main',\n    ],\n},\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Modify ",(0,r.jsx)(n.code,{children:"package.xml"})," to include dependencies:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<depend>rclpy</depend>\n<depend>std_msgs</depend>\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-4-build-and-run-the-package",children:"Step 4: Build and Run the Package"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Return to your workspace root and build the package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\nsource install/setup.bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Run the publisher node:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_publisher_pkg publisher_node\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Verify the published messages using the ",(0,r.jsx)(n.code,{children:"ros2 topic"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /topic_name\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You should see the messages published by your node in the terminal."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You have successfully created and run your first ROS2 publisher node. This foundational skill is essential for developing ROS2 applications. For further learning, explore adding subscribers, customizing message types, or creating complex multi-node systems."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create a subscriber node to listen to the published messages."}),"\n",(0,r.jsxs)(n.li,{children:["Experiment with different message types, such as ",(0,r.jsx)(n.code,{children:"Int32"})," or custom messages."]}),"\n",(0,r.jsx)(n.li,{children:"Implement error handling and logging for robust node development."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For any queries or assistance, refer to the ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/",children:"ROS2 documentation"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);